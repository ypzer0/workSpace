SET FOREIGN_KEY_CHECKS=0; 
-- ------------------------------------- 
/**
 * 冻结金额
 * 作者：zy
 */
-- ----------------------------
-- Table structure for `coupon_user_frozen_info`
-- ----------------------------
DROP TABLE IF EXISTS `coupon_user_frozen_info`;
CREATE TABLE `coupon_user_frozen_info` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `u_id` int(11) NOT NULL COMMENT '用户id',
  `f_money` decimal(10, 2) DEFAULT 0 COMMENT '冻结金额',
  `src_type` tinyint(2) DEFAULT 0 COMMENT '冻结金额来源 0:佣金，1：卖劵收入',
  `status` tinyint(2) default 0 COMMENT '状态0:冻结，1：解冻',
  `h_id` int(11) NOT NULL COMMENT '操作人id',
  `h_name` varchar(50) default '' COMMENT '操作人',
  `add_time` datetime DEFAULT NULL COMMENT '添加时间',
  `u_time` datetime DEFAULT NULL COMMENT '修改时间',
  
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `u_id`(`u_id`) USING BTREE,
  INDEX `h_id`(`h_id`) USING BTREE,
  INDEX `status`(`status`) USING BTREE,
  INDEX `add_time`(`add_time`) USING BTREE,
  INDEX `src_type`(`src_type`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=66 DEFAULT CHARSET=utf8;

/**
 * 冻结金额明细
 * 作者：zy
 */
-- ----------------------------
-- Table structure for `coupon_user_frozen_info_log`
-- ----------------------------
DROP TABLE IF EXISTS `coupon_user_frozen_info_log`;
CREATE TABLE `coupon_user_frozen_info_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `u_id` int(11) NOT NULL COMMENT '用户id',
  `f_money` decimal(10, 2) DEFAULT 0 COMMENT '冻结金额',
  `src_type` tinyint(2) DEFAULT 0 COMMENT '冻结金额来源 0:佣金，1：卖劵收入',
  `status` tinyint(2) default 0 COMMENT '状态0:冻结，1：解冻',
  `h_id` int(11) NOT NULL COMMENT '操作人id',
  `h_name` varchar(50) default '' COMMENT '操作人',
  `add_time` datetime DEFAULT NULL COMMENT '添加时间',
  
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `u_id`(`u_id`) USING BTREE,
  INDEX `status`(`status`) USING BTREE,
  INDEX `h_id`(`h_id`) USING BTREE,
  INDEX `add_time`(`add_time`) USING BTREE,
  INDEX `src_type`(`src_type`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=66 DEFAULT CHARSET=utf8;








-- ------------------------------------- 
DROP TABLE IF EXISTS `coupon_goods_info`;
CREATE TABLE `coupon_goods_info` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `c_id` int(11) DEFAULT '0' COMMENT '种类id',
  `c_name` varchar(50) DEFAULT '' COMMENT '种类',
  `goods_sn` varchar(60) DEFAULT '' COMMENT '商品编号',
  `name` varchar(120) NOT NULL DEFAULT '' COMMENT '商品名称',
  `goods_number` mediumint(8) unsigned DEFAULT '0' COMMENT '商品数量',
  `keywords` varchar(255) DEFAULT '' COMMENT '搜索关键字',
  `goods_brief` varchar(255) DEFAULT '' COMMENT '商品描述',
  `is_on_sale` tinyint(1) unsigned DEFAULT '1' COMMENT '是否在销售  0 :没有,  1: 有,  2: 已售',
  `sort_order` smallint(4) unsigned DEFAULT '100' COMMENT '订单顺序',
  `is_delete` tinyint(1) unsigned DEFAULT '0' COMMENT '是否删除  0 ， 未删除  1， 已删除',
  `eff_time_end` bigint(32) DEFAULT '0' COMMENT '有效时间',
  `redeem_code` varchar(50) DEFAULT '' COMMENT '兑换码（加密）',
  `img_path` varchar(200) DEFAULT NULL COMMENT '图片路径（加密）',
  `vali_code` varchar(300) DEFAULT NULL COMMENT '验证加密完整性（全部加密）',
  `goods_unit` varchar(45) DEFAULT NULL COMMENT '商品单位',
  `is_plat` tinyint(1) DEFAULT 1 COMMENT '是否平台商品: 0 否 1:是',
  `is_used` tinyint(1) DEFAULT 1 COMMENT '是否使用: 0 已使用 1:未使用',
  `cc_id` int(11) DEFAULT NULL COMMENT '客户创建人ID',
  `create_user_id` int(11) DEFAULT NULL COMMENT '创建人ID',
  `update_user_id` int(11) DEFAULT NULL COMMENT '修改人ID',
  `eff_time` datetime DEFAULT NULL COMMENT '有效期',
  `add_time` datetime DEFAULT NULL COMMENT '添加时间',
  `update_time` datetime DEFAULT NULL COMMENT '修改时间',
  PRIMARY KEY (`id`),
  KEY `goods_sn` (`goods_sn`),
  KEY `c_id` (`c_id`),
  KEY `cc_id` (`cc_id`),
  KEY `name` (`name`),
  KEY `is_on_sale` (`is_on_sale`),
  KEY `is_delete` (`is_delete`),
  KEY `eff_time` (`eff_time`),
  KEY `create_user_id` (`create_user_id`),
  KEY `goods_number` (`goods_number`),
  KEY `add_time` (`add_time`),
  KEY `is_plat` (`is_plat`),
  KEY `is_used` (`is_used`),
  KEY `sort_order` (`sort_order`)
) ENGINE=InnoDB AUTO_INCREMENT=666 DEFAULT CHARSET=utf8;
-- ------------------------------------- 

/**
 * 商品种类
 * a:zy
 * e:zgyxszyd@163.com
 *  2019-4-20 1:57 商品种类**/
-- ----------------------------
-- Table structure for `coupon_category`
-- ----------------------------
DROP TABLE IF EXISTS `coupon_category`;
CREATE TABLE `coupon_category` (

  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,

  `name` varchar(90) NOT NULL DEFAULT '' COMMENT '种类名称',
  `keywords` varchar(255) DEFAULT '' COMMENT '关键字',
  `front_desc` varchar(255) DEFAULT '' COMMENT '描述',
  `parent_id` int(11) unsigned DEFAULT '0' COMMENT '上级id',
  `sort_order` tinyint(1) unsigned DEFAULT '50' COMMENT '排序号',
  `is_show` tinyint(1) unsigned DEFAULT '1' COMMENT '是否展示 1：展示 0：隐藏',
  
  `market_price` decimal(10, 2) DEFAULT 0 COMMENT '市场价',
  `sale_price` decimal(10, 2) DEFAULT 0 COMMENT '鼎鑫销售价格',
  `sale_price_hy` decimal(10, 2) DEFAULT 0 COMMENT '惠友销售价格',
  `buy_price` decimal(10, 2) DEFAULT 0 COMMENT '收购价格',
  `pro_price` decimal(10, 2) DEFAULT 0 COMMENT '推广价格',
  `src` varchar(2000) DEFAULT '' COMMENT '来源描述',
  `goods_desc` varchar(2000) DEFAULT '' COMMENT '商品描述',
  `reminder` varchar(2000) DEFAULT '' COMMENT '温馨提示',
  `service` varchar(2000) DEFAULT '' COMMENT '服务协议',
  `user_msg` varchar(2000) DEFAULT '' COMMENT '使用需知',
  `max_count` int(11) DEFAULT 0 COMMENT '最大库存',
  `sale_times` varchar(20) DEFAULT '' COMMENT '0:正常出售 1：周末出售',
  `pic_url` varchar(200) DEFAULT '' COMMENT '商品缩略图',
  `pic_big_url` varchar(200) DEFAULT '' COMMENT '商品大图url',
  `handler_id` int(11) DEFAULT 0 COMMENT '操作人',
  `add_time` datetime not null COMMENT '添加时间',
  `status` tinyint(1) unsigned DEFAULT 0 COMMENT '状态 0：正常 1：删除',
  
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `parent_id`(`parent_id`) USING BTREE,
  INDEX `is_show`(`is_show`) USING BTREE,
  INDEX `handler_id`(`handler_id`) USING BTREE,
  INDEX `status`(`status`) USING BTREE,
  INDEX `add_time`(`add_time`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=30 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of coupon_category
-- ----------------------------

INSERT INTO `coupon_category`(`name`, `keywords`, `front_desc`, `parent_id`, `sort_order`, `is_show`, `market_price`, `sale_price`, `buy_price`, `pro_price`, `src`, `goods_desc`, `reminder`, `service`, `user_msg`, `max_count`, `sale_times`, `pic_url`, `pic_big_url`, `handler_id`, `add_time`, `status`) VALUES ('推荐', '推荐', '推荐', 0, 0.00, 0, 0.00, 0.00, 0.00, 0.00, '', '', '', '', '', 0, '0', '', '', 0, '2019-04-25 14:15:14', 0);
INSERT INTO `coupon_category`(`name`, `keywords`, `front_desc`, `parent_id`, `sort_order`, `is_show`, `market_price`, `sale_price`, `buy_price`, `pro_price`, `src`, `goods_desc`, `reminder`, `service`, `user_msg`, `max_count`, `sale_times`, `pic_url`, `pic_big_url`, `handler_id`, `add_time`, `status`) VALUES ('视频', '视频', '视频', 0, 0.00, 0, 0.00, 0.00, 0.00, 0.00, '', '', '', '', '', 0, '0', '', '', 0, '2019-04-25 14:15:14', 0);
INSERT INTO `coupon_category`(`name`, `keywords`, `front_desc`, `parent_id`, `sort_order`, `is_show`, `market_price`, `sale_price`, `buy_price`, `pro_price`, `src`, `goods_desc`, `reminder`, `service`, `user_msg`, `max_count`, `sale_times`, `pic_url`, `pic_big_url`, `handler_id`, `add_time`, `status`) VALUES ('饮品', '饮品', '饮品', 0, 0.00, 0, 0.00, 0.00, 0.00, 0.00, '', '', '', '', '', 0, '0', '', '', 0, '2019-04-25 14:15:14', 0);
INSERT INTO `coupon_category`(`name`, `keywords`, `front_desc`, `parent_id`, `sort_order`, `is_show`, `market_price`, `sale_price`, `buy_price`, `pro_price`, `src`, `goods_desc`, `reminder`, `service`, `user_msg`, `max_count`, `sale_times`, `pic_url`, `pic_big_url`, `handler_id`, `add_time`, `status`) VALUES ('出行', '出行', '出行', 0, 0.00, 0, 0.00, 0.00, 0.00, 0.00, '', '', '', '', '', 0, '0', '', '', 0, '2019-04-25 14:15:14', 0);
INSERT INTO `coupon_category`(`name`, `keywords`, `front_desc`, `parent_id`, `sort_order`, `is_show`, `market_price`, `sale_price`, `buy_price`, `pro_price`, `src`, `goods_desc`, `reminder`, `service`, `user_msg`, `max_count`, `sale_times`, `pic_url`, `pic_big_url`, `handler_id`, `add_time`, `status`) VALUES ('美食', '美食', '美食', 0, 0.00, 0, 0.00, 0.00, 0.00, 0.00, '', '', '', '', '', 0, '0', '', '', 0, '2019-04-25 14:15:14', 0);


-- ------------------------------------- 
/**
 * a:ghost
 * 提现申请表
 */
-- ----------------------------
-- Table structure for `coupon_cash_drawal`
-- ----------------------------
DROP TABLE IF EXISTS `coupon_cash_drawal`;
CREATE TABLE `coupon_cash_drawal` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uid` int(11) NOT NULL COMMENT '用户id',
  `uname` varchar(40) DEFAULT '' COMMENT '用户名',
  `cash` decimal(10,2) DEFAULT 0 COMMENT '提现金额',
  `c_type` tinyint(2) DEFAULT 1 COMMENT '提现类型,1:微信提现 2 支付宝提现',
  `status` tinyint(2) DEFAULT 0 COMMENT '状态   0，申请中  1，已通过  2，已拒绝',
  `msg` varchar(200) DEFAULT '' COMMENT '处理意见',
  `add_time` datetime DEFAULT NULL COMMENT '添加时间',
  `update_time` datetime DEFAULT NULL COMMENT '修改时间',
  
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `status`(`status`) USING BTREE,
  INDEX `uname`(`uname`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=66 DEFAULT CHARSET=utf8;


/**
 * a:ghost
 */
-- ----------------------------
-- Table structure for `coupon_cash_drawal_log`
-- ----------------------------
DROP TABLE IF EXISTS `coupon_cash_drawal_log`;
CREATE TABLE `coupon_cash_drawal_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `cid` int(11) NOT NULL COMMENT '提现id',
  `uid` int(11) NOT NULL COMMENT '用户id',
  `uname` varchar(40) DEFAULT '' COMMENT '用户名',
  `cash` Decimal(10,2) DEFAULT 0 COMMENT '提现金额',
  `c_type` tinyint(2) DEFAULT 0 COMMENT '提现类型,1:提现申请',
  `status` tinyint(2) DEFAULT 0 COMMENT '状态   0，申请中  1，已通过  2，已拒绝',
  `msg` varchar(200) DEFAULT '' COMMENT '处理意见',
  `add_time` datetime DEFAULT NULL COMMENT '添加时间',
  `title` varchar(100) DEFAULT '' COMMENT '标题',
  `content` varchar(200) DEFAULT '' COMMENT '内容',
  `handler_id` int(11) DEFAULT 0 COMMENT '操作人Id',
  `handler_name` varchar(50) DEFAULT '' COMMENT '操作人名',
  
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=66 DEFAULT CHARSET=utf8;
-- ------------------------------------- 
/** 
 * a:zy
 * e:zgyxszyd@163.com
 * 2019-3-30 1:57 支付日志 **/
-- ----------------------------
-- Table structure for `nideshop_pay_log`
-- ----------------------------
DROP TABLE IF EXISTS `nideshop_pay_log`;
CREATE TABLE `nideshop_pay_log` (

  `id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT,
  `ip` varchar(25) DEFAULT '' COMMENT '请求ip',
  `u_id` mediumint(8) DEFAULT 0 COMMENT '申请人Id',
  `u_name` varchar(50) DEFAULT '' COMMENT '申请人昵称',
  `o_id` mediumint(8) DEFAULT 0 COMMENT '订单Id',
  `order_no` varchar(50) DEFAULT '' COMMENT '订单编号',
  `money` decimal(10,2) DEFAULT 0 COMMENT '金额',
  `tra_type` tinyint(2) DEFAULT 0 COMMENT '类型:1：用户申请 2: 平台返回',
  `pay_type` tinyint(2) DEFAULT 0 COMMENT '类型:1：微信支付 2: 支付宝',
  `status` tinyint(2) DEFAULT 0 COMMENT '类型:1：成功 2:失败 3:异常',
  `ctime` datetime COMMENT '创建时间',
  
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `ip`(`ip`) USING BTREE,
  INDEX `u_id`(`u_id`) USING BTREE,
  INDEX `o_id`(`o_id`) USING BTREE,
  INDEX `order_no`(`order_no`) USING BTREE,
  INDEX `tra_type`(`tra_type`) USING BTREE,
  INDEX `status`(`status`) USING BTREE,
  INDEX `pay_type`(`pay_type`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=89 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of nideshop_pay_log
-- ------------------------------ ------------------------------------- 
-- ----------------------------
-- Table structure for `coupon_collect`
-- ----------------------------
DROP TABLE IF EXISTS `coupon_collect`;
CREATE TABLE `coupon_collect` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
  `user_id` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '用户Id',
  `value_id` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '产品Id',
  `add_time` datetime not null  COMMENT '添加时间',
  `is_attention` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否提醒',
  `type_id` int(2) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  INDEX `user_id`(`user_id`) USING BTREE,
  INDEX `value_id`(`value_id`) USING BTREE,
  INDEX `type_id`(`type_id`) USING BTREE,
  INDEX `is_attention`(`is_attention`) USING BTREE
  
) ENGINE=InnoDB AUTO_INCREMENT=75 DEFAULT CHARSET=utf8;-- ------------------------------------- 
/**
 * 
 * 用户与上级关系表
 * 
 */
DROP TABLE IF EXISTS `fx_user`;
CREATE TABLE `fx_user` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `u_id` int(11) unsigned DEFAULT '0' COMMENT '用户ID',
  `puid` int(11) unsigned DEFAULT '0' COMMENT '上级用户ID',
  `add_time` datetime DEFAULT NULL COMMENT '添加时间',
  `from_type` tinyint(2) DEFAULT 0 COMMENT '来至哪里',
  
  PRIMARY KEY (`id`),
  INDEX `u_id`(`u_id`) USING BTREE,
  INDEX `puid`(`puid`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8;

/**
 * 
 * 用户与上级关系日志表
 * 
 * 
 */
DROP TABLE IF EXISTS `fx_user_log`;
CREATE TABLE `fx_user_log` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `f_id` int(11) unsigned DEFAULT '0' COMMENT '分销ID',
  `u_id` int(11) unsigned DEFAULT '0' COMMENT '用户ID',
  `puid` int(11) unsigned DEFAULT '0' COMMENT '上级用户ID',
  `content` varchar(100)  DEFAULT '' COMMENT '描述',
  `add_time` datetime DEFAULT NULL COMMENT '添加时间',
  
  PRIMARY KEY (`id`),
  INDEX `u_id`(`u_id`) USING BTREE,
  INDEX `puid`(`puid`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8;-- ------------------------------------- 

/**
 * 
 * 用户信用明细表
 * 
 */
DROP TABLE IF EXISTS `coupon_user_credit_info`;
CREATE TABLE `coupon_user_credit_info` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `c_type` tinyint(2) DEFAULT 0 COMMENT '信用明细类型, 1:增加  2:减少',
  `u_id` int(11) unsigned DEFAULT '0' COMMENT '用户ID',
  `credit` int(11) unsigned DEFAULT '0' COMMENT '变动积分',
  `pre_credit` int(11) unsigned DEFAULT '0' COMMENT '变动前',
  `end_credit` int(11) unsigned DEFAULT '0' COMMENT '变动后',
  `reson` varchar(20)  DEFAULT '' COMMENT '变动原因',
  `handler_id` int(11) unsigned DEFAULT '0' COMMENT '操作人',
  `add_time` datetime DEFAULT NULL COMMENT '操作时间',
  
  PRIMARY KEY (`id`),
  INDEX `u_id`(`u_id`) USING BTREE,
  INDEX `handler_id`(`handler_id`) USING BTREE,
  INDEX `add_time`(`add_time`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8;


/**
 * 
 * 用户积分明细表
 * 
 */
DROP TABLE IF EXISTS `coupon_user_integral_info`;
CREATE TABLE `coupon_user_integral_info` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `i_type` tinyint(2) DEFAULT 0 COMMENT '信用明细类型, 1:增加  2:减少',
  `u_id` int(11) unsigned DEFAULT '0' COMMENT '用户ID',
  `integral` int(11) unsigned DEFAULT '0' COMMENT '变动积分',
  `pre_integral` int(11) unsigned DEFAULT '0' COMMENT '变动前',
  `end_integral` int(11) unsigned DEFAULT '0' COMMENT '变动后',
  `reson` varchar(20)  DEFAULT '' COMMENT '变动原因',
  `handler_id` int(11) unsigned DEFAULT '0' COMMENT '操作人',
  `add_time` datetime DEFAULT NULL COMMENT '操作时间',
  
  PRIMARY KEY (`id`),
  INDEX `u_id`(`u_id`) USING BTREE,
  INDEX `handler_id`(`handler_id`) USING BTREE,
  INDEX `add_time`(`add_time`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8;
-- ------------------------------------- 

/**
 * 优惠劵用户管理
 * 
 */
-- ----------------------------
-- Table structure for `coupon_user`
-- ----------------------------
DROP TABLE IF EXISTS `coupon_user`;
CREATE TABLE `coupon_user` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `username` varchar(60) NOT NULL DEFAULT '' COMMENT '用户名',
  `password` varchar(100) DEFAULT '' COMMENT '密码',
  `gender` tinyint(1) DEFAULT NULL COMMENT '性别：0:女 1男',
  `birthday` datetime DEFAULT NULL COMMENT '生日',
  `register_time` datetime DEFAULT NULL COMMENT '注册时间',
  `last_login_time` datetime DEFAULT NULL COMMENT '最后登录时间',
  `last_login_ip` varchar(15) DEFAULT '' COMMENT '最后登录 ip',
  `user_level_id` tinyint(3) DEFAULT NULL COMMENT '用户级别',
  `nickname` varchar(300) DEFAULT '' COMMENT '昵称',
  `mobile` varchar(20) DEFAULT '' COMMENT '手机',
  `register_ip` varchar(45) DEFAULT '' COMMENT '注册ip',
  `avatar` varchar(255) DEFAULT '' COMMENT '头像',
  `weixin_openid` varchar(50) DEFAULT '' COMMENT '微信openid',
  `age` tinyint(4) DEFAULT 0 COMMENT '年龄',
  
  `plat_type` tinyint(3) DEFAULT NULL COMMENT '平台标识编码：1: 鼎鑫权益用户DX开头  2:惠友圈用户 HY开头',
  `weixin_code` varchar(100) DEFAULT '' COMMENT '微信号',
  `code_id` int(11) DEFAULT 0 COMMENT '用户编号id',
  `multiple` int(11) DEFAULT 50 COMMENT '推广倍数 分倍数',
  `status` tinyint(1) DEFAULT 0 COMMENT '状态 0，正常 1，禁用 2，删除',
  `zhifubao` varchar(50) DEFAULT '' COMMENT '支付宝账号',
  `credit` decimal(10,2) DEFAULT 0.00 COMMENT '用户信用积分',
  `integral` decimal(10,2) DEFAULT 0.00 COMMENT '积分',
  `is_extend` tinyint(1) DEFAULT 0 COMMENT '状态 0 否  1 是',
  `frozen` decimal(10,2) DEFAULT 0.00 COMMENT '冻结金额',
  `money` decimal(10,2) DEFAULT 0.00 COMMENT '余额',
  `number` tinyint(1) DEFAULT 0 COMMENT '剩余数量',
  `save_money` decimal(10,2) DEFAULT 0.00 COMMENT '节省金额',
  
  PRIMARY KEY (`id`),
  UNIQUE KEY `username` (`username`),
  UNIQUE KEY `code_id` (`code_id`),
  KEY `register_time` (`register_time`),
  KEY `last_login_time` (`last_login_time`),
  KEY `user_level_id` (`user_level_id`),
  KEY `mobile` (`mobile`),
  KEY `weixin_openid` (`weixin_openid`)
) ENGINE=InnoDB AUTO_INCREMENT=24 DEFAULT CHARSET=utf8;


/**
 *用户编码关系
 * 
 */
-- ----------------------------
-- Table structure for `coupon_user_code_bom`
-- ----------------------------
DROP TABLE IF EXISTS `coupon_user_code_bom`;
CREATE TABLE `coupon_user_code_bom` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `u_id` int(11) NOT NULL COMMENT '用户id',
  `u_code` int(11) NOT NULL  COMMENT '用户编号',
  
  PRIMARY KEY (`id`),
  UNIQUE KEY `u_id` (`u_id`),
  KEY `u_code` (`u_code`)
) ENGINE=InnoDB AUTO_INCREMENT=33 DEFAULT CHARSET=utf8;








-- ------------------------------------- 
/**
 * 短信
 */
DROP TABLE IF EXISTS `coupon_sms_log`;
CREATE TABLE `coupon_sms_log` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
  `user_id` int(11) DEFAULT 0 COMMENT '用户id',
  `phone` varchar(32) DEFAULT NULL COMMENT '手机号',
  `log_date` bigint(20) DEFAULT NULL COMMENT '发送时间',
  `sms_code` varchar(12) DEFAULT NULL COMMENT '短信码',
  `type` tinyint(2) DEFAULT 0 COMMENT '类型',
  `send_status` bigint(20) DEFAULT NULL COMMENT '发送状态',
  `is_used` tinyint(1) DEFAULT 0 COMMENT '是否使用 0:未使用 1:已经使用',
  `sms_text` varchar(255) DEFAULT NULL COMMENT '1成功 0失败',
  PRIMARY KEY (`id`),
  INDEX `user_id`(`user_id`) USING BTREE,
  INDEX `phone`(`phone`) USING BTREE,
  INDEX `log_date`(`log_date`) USING BTREE,
  INDEX `is_used`(`is_used`) USING BTREE,
  INDEX `type`(`type`) USING BTREE,
  INDEX `send_status`(`send_status`) USING BTREE
  
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;
-- ------------------------------------- 

/**
 * a:zy
 * e:zgyxszyd@163.com
 *  2019-3-6 1:57 系统操作日志**/
-- ----------------------------
-- Table structure for `sys_oper_log`
-- 系统操作日志
-- ----------------------------
DROP TABLE IF EXISTS `sys_oper_log`;
CREATE TABLE `sys_oper_log` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `flag` mediumint(3) NOT NULL COMMENT '标志id',
  `hid` mediumint(8) NULL COMMENT '操作人',
  `name` varchar(50) DEFAULT NULL COMMENT '操作名称',
  `title` varchar(200) DEFAULT NULL COMMENT '请求方法',
  `params` varchar(5000) DEFAULT NULL COMMENT '请求参数',
  `create_date` datetime DEFAULT NULL COMMENT '创建时间',
  PRIMARY KEY (`id`),
  INDEX `flag`(`flag`) USING BTREE,
  INDEX `hid`(`hid`) USING BTREE,
  INDEX `name`(`name`) USING BTREE,
  INDEX `title`(`title`) USING BTREE,
  INDEX `create_date`(`create_date`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=894 DEFAULT CHARSET=utf8 COMMENT='系统操作日志';
-- ----------------------------
-- Table structure for `sys_oper_log`
-- ----------------------------

-- ----------------------------
-- Table structure for `sys_config`
-- ----------------------------
DROP TABLE IF EXISTS `sys_config`;
CREATE TABLE `sys_config` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `key` varchar(50) DEFAULT NULL COMMENT 'key',
  `value` varchar(2000) DEFAULT NULL COMMENT 'value',
  `status` tinyint(4) DEFAULT '1' COMMENT '状态   0：隐藏   1：显示',
  `remark` varchar(500) DEFAULT NULL COMMENT '备注',
  PRIMARY KEY (`id`),
  UNIQUE KEY `key` (`key`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 COMMENT='系统配置信息表';

INSERT INTO `sys_config`(`key`, `value`, `status`, `remark`) VALUES ('SMS_CONFIG_KEY', '{\"aliyunDomain\":\"dysmsapi.aliyuncs.com\",\"aliyunKey\":\"LTAIiWNFofZeZybK\",\"aliyunKeySecret\":\"T6biPbj3sWgArs3Yvu2aurGEuR4Qe1\",\"aliyunPro\":\"Dysmsapi\",\"aliyunSign\":\"千纸鹤\",\"domain\":\"http://web.cr6868.com/asmx/smsservice.aspx?\",\"name\":\"\",\"pwd\":\"\",\"sign\":\"\",\"type\":2}', 0, '短信配置');
INSERT INTO `sys_config`(`key`, `value`, `status`, `remark`) VALUES ('CLOUD_STORAGE_CONFIG_KEY', '{\"aliyunAccessKeyId\":\"LTAI2jbCwa9br3Bh\",\"aliyunAccessKeySecret\":\"uq1cf5RTOgGfcS7rb50p2HZqpTFWRF\",\"aliyunBucketName\":\"qzhws\",\"aliyunDomain\":\"https://wsimg.qzhkj.cn\",\"aliyunEndPoint\":\"http://oss-cn-shenzhen.aliyuncs.com\",\"aliyunPrefix\":\"h5/goods\",\"qcloudBucketName\":\"\",\"qcloudDomain\":\"\",\"qcloudPrefix\":\"\",\"qcloudSecretId\":\"\",\"qcloudSecretKey\":\"\",\"qiniuAccessKey\":\"IXYAaaAwc-ZSuInpEoEJq_CivmcAjWLq1HmpK9dr\",\"qiniuBucketName\":\"wxmall\",\"qiniuDomain\":\"http://p9kyr79ne.bkt.clouddn.com\",\"qiniuPrefix\":\"upload\",\"qiniuSecretKey\":\"dVlk3dhOAGubYdiCyybE13o5KpjyqGhqh428ufxP\",\"type\":2}', 0, '云存储配置信息');




-- ----------------------------
-- Table structure for `sys_dept`
-- ----------------------------
DROP TABLE IF EXISTS `sys_dept`;
CREATE TABLE `sys_dept` (
  `dept_id` bigint(20) NOT NULL AUTO_INCREMENT,
  `parent_id` bigint(20) DEFAULT NULL COMMENT '上级部门ID，一级部门为0',
  `name` varchar(50) DEFAULT NULL COMMENT '部门名称',
  `order_num` int(11) DEFAULT NULL COMMENT '排序',
  `del_flag` tinyint(4) DEFAULT '0' COMMENT '是否删除  -1：已删除  0：正常',
  PRIMARY KEY (`dept_id`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8 COMMENT='部门管理';


-- ----------------------------
-- Table structure for `sys_log`
-- ----------------------------
DROP TABLE IF EXISTS `sys_log`;
CREATE TABLE `sys_log` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `username` varchar(50) DEFAULT NULL COMMENT '用户名',
  `operation` varchar(50) DEFAULT NULL COMMENT '用户操作',
  `method` varchar(200) DEFAULT NULL COMMENT '请求方法',
  `params` varchar(5000) DEFAULT NULL COMMENT '请求参数',
  `ip` varchar(64) DEFAULT NULL COMMENT 'IP地址',
  `create_date` datetime DEFAULT NULL COMMENT '创建时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=894 DEFAULT CHARSET=utf8 COMMENT='系统日志';



-- ----------------------------
-- Table structure for `sys_macro`
-- ----------------------------
DROP TABLE IF EXISTS `sys_macro`;
CREATE TABLE `sys_macro` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `parent_id` bigint(255) DEFAULT NULL COMMENT '父级id',
  `name` varchar(50) DEFAULT NULL COMMENT '名称',
  `value` varchar(2000) DEFAULT NULL COMMENT '值',
  `status` tinyint(4) DEFAULT '1' COMMENT '状态，0：隐藏   1：显示',
  `type` tinyint(20) DEFAULT NULL COMMENT '类型,0:目录，1:参数配置',
  `order_num` int(11) DEFAULT NULL COMMENT '排序',
  `remark` varchar(500) DEFAULT NULL COMMENT '备注',
  `gmt_create` date DEFAULT NULL COMMENT '创建时间',
  `gmt_modified` date DEFAULT NULL COMMENT '修改时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=gbk COMMENT='通用字典表';


-- ----------------------------
-- Table structure for `sys_menu`
-- ----------------------------
DROP TABLE IF EXISTS `sys_menu`;
CREATE TABLE `sys_menu` (
  `menu_id` bigint(20) NOT NULL AUTO_INCREMENT,
  `parent_id` bigint(20) DEFAULT NULL COMMENT '父菜单ID，一级菜单为0',
  `name` varchar(50) DEFAULT NULL COMMENT '菜单名称',
  `url` varchar(200) DEFAULT NULL COMMENT '菜单URL',
  `perms` varchar(500) DEFAULT NULL COMMENT '授权(多个用逗号分隔，如：user:list,user:create)',
  `type` int(11) DEFAULT NULL COMMENT '类型   0：目录   1：菜单   2：按钮',
  `icon` varchar(50) DEFAULT NULL COMMENT '菜单图标',
  `order_num` int(11) DEFAULT NULL COMMENT '排序',
  `status` int(1) DEFAULT NULL,
  PRIMARY KEY (`menu_id`)
) ENGINE=InnoDB AUTO_INCREMENT=375 DEFAULT CHARSET=utf8 COMMENT='菜单管理';

-- ----------------------------
-- Table structure for `sys_oss`
-- ----------------------------
DROP TABLE IF EXISTS `sys_oss`;
CREATE TABLE `sys_oss` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `url` varchar(200) DEFAULT NULL COMMENT 'URL地址',
  `create_date` datetime DEFAULT NULL COMMENT '创建时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='文件上传';

-- ----------------------------
-- Records of sys_oss
-- ----------------------------

-- ----------------------------
-- Table structure for `sys_role`
-- ----------------------------
DROP TABLE IF EXISTS `sys_role`;
CREATE TABLE `sys_role` (
  `role_id` bigint(20) NOT NULL AUTO_INCREMENT,
  `role_name` varchar(100) DEFAULT NULL COMMENT '角色名称',
  `remark` varchar(100) DEFAULT NULL COMMENT '备注',
  `create_user_id` bigint(20) DEFAULT NULL COMMENT '创建者ID',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  `dept_id` bigint(20) DEFAULT NULL COMMENT '部门ID',
  PRIMARY KEY (`role_id`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8 COMMENT='角色';


-- ----------------------------
-- Table structure for `sys_role_dept`
-- ----------------------------
DROP TABLE IF EXISTS `sys_role_dept`;
CREATE TABLE `sys_role_dept` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `role_id` bigint(20) DEFAULT NULL COMMENT '角色ID',
  `dept_id` bigint(20) DEFAULT NULL COMMENT '部门ID',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='角色与部门对应关系';

-- ----------------------------
-- Records of sys_role_dept
-- ----------------------------

-- ----------------------------
-- Table structure for `sys_role_menu`
-- ----------------------------
DROP TABLE IF EXISTS `sys_role_menu`;
CREATE TABLE `sys_role_menu` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `role_id` bigint(20) DEFAULT NULL COMMENT '角色ID',
  `menu_id` bigint(20) DEFAULT NULL COMMENT '菜单ID',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='角色与菜单对应关系';

-- ----------------------------
-- Records of sys_role_menu
-- ----------------------------

-- ----------------------------
-- Table structure for `sys_user`
-- ----------------------------
DROP TABLE IF EXISTS `sys_user`;
CREATE TABLE `sys_user` (
  `user_id` bigint(20) NOT NULL AUTO_INCREMENT,
  `username` varchar(50) NOT NULL COMMENT '用户名',
  `password` varchar(100) DEFAULT NULL COMMENT '密码',
  `email` varchar(100) DEFAULT NULL COMMENT '邮箱',
  `mobile` varchar(100) DEFAULT NULL COMMENT '手机号',
  `status` tinyint(4) DEFAULT NULL COMMENT '状态  0：禁用   1：正常',
  `create_user_id` bigint(20) DEFAULT NULL COMMENT '创建者ID',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  `dept_id` bigint(20) DEFAULT NULL COMMENT '部门ID',
  PRIMARY KEY (`user_id`),
  UNIQUE KEY `username` (`username`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8 COMMENT='系统用户';

-- ----------------------------
-- Records of sys_user
-- ----------------------------
INSERT INTO `sys_user`(`user_id`, `username`, `password`, `email`, `mobile`, `status`, `create_user_id`, `create_time`, `dept_id`) VALUES (1, 'admin', '92925488b28ab12584ac8fcaa8a27a0f497b2c62940c8f4fbc8ef19ebc87c43e', 'zgyxszyd@163.com', '18375613461', 1, 1, '2019-05-06 08:08:08', 1);


-- ----------------------------
-- Table structure for `sys_user_role`
-- ----------------------------
DROP TABLE IF EXISTS `sys_user_role`;
CREATE TABLE `sys_user_role` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `user_id` bigint(20) DEFAULT NULL COMMENT '用户ID',
  `role_id` bigint(20) DEFAULT NULL COMMENT '角色ID',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=60 DEFAULT CHARSET=utf8 COMMENT='用户与角色对应关系';


-- ----------------------------
-- Table structure for `tb_token`
-- ----------------------------
DROP TABLE IF EXISTS `tb_token`;
CREATE TABLE `tb_token` (
  `user_id` bigint(20) NOT NULL,
  `token` varchar(100) NOT NULL COMMENT 'token',
  `expire_time` datetime DEFAULT NULL COMMENT '过期时间',
  `update_time` datetime DEFAULT NULL COMMENT '更新时间',
  PRIMARY KEY (`user_id`),
  UNIQUE KEY `token` (`token`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='用户Token';

DROP TABLE IF EXISTS sys_region;
create table sys_region
(
  id smallint auto_increment
    primary key,
  parent_id smallint default '0' ,
  name varchar(120) default '' not null,
  type tinyint(1) default '2' not null,
  agency_id smallint default '0'
)
;

create index agency_id
  on sys_region (agency_id)
;

create index parent_id
  on sys_region (parent_id)
;

create index region_type
  on sys_region (type)
;

DROP TABLE IF EXISTS `sys_sms_log`;
CREATE TABLE `sys_sms_log` (
  `id` varchar(32) NOT NULL COMMENT '主键',
  `user_id` bigint(20) COMMENT '操作人',
  `content` text COMMENT '必填参数。发送内容（1-500 个汉字）UTF-8编码',
  `mobile` text COMMENT '必填参数。手机号码。多个以英文逗号隔开',
  `stime` datetime COMMENT '可选参数。发送时间，填写时已填写的时间发送，不填时为当前时间发送',
  `sign` varchar(32) COMMENT '必填参数。用户签名',
  `type` varchar(32) COMMENT '必填参数。固定值 pt',
  `extno` varchar(255) COMMENT '可选参数。扩展码，用户定义扩展码，只能为数字',
  `send_status` int(11) COMMENT '1成功 0失败',
  `send_id` varchar(32) COMMENT '发送编号',
  `invalid_num` int(11) COMMENT '无效号码数',
  `success_num` int(11) COMMENT '成功提交数',
  `black_num` int(11) COMMENT '黑名单数',
  `return_msg` varchar(50) COMMENT '返回消息',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;


-- ----------------------------
-- Table structure for `schedule_job`
-- ----------------------------
DROP TABLE IF EXISTS `schedule_job`;
CREATE TABLE `schedule_job` (
  `job_id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '任务id',
  `bean_name` varchar(200) DEFAULT NULL COMMENT 'spring bean名称',
  `method_name` varchar(100) DEFAULT NULL COMMENT '方法名',
  `params` varchar(2000) DEFAULT NULL COMMENT '参数',
  `cron_expression` varchar(100) DEFAULT NULL COMMENT 'cron表达式',
  `status` tinyint(4) DEFAULT NULL COMMENT '任务状态',
  `remark` varchar(255) DEFAULT NULL COMMENT '备注',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  PRIMARY KEY (`job_id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 COMMENT='定时任务';

-- ----------------------------
-- Records of schedule_job
-- ----------------------------

-- 系统自动任务数据
TRUNCATE table `schedule_job`;
INSERT INTO `schedule_job`(`bean_name`, `method_name`, `params`, `cron_expression`, `status`, `remark`, `create_time`) VALUES ('OrderTask', 'updateOrderReleaseRpt', NULL, '0 59 23 * * ? *', 0, '更新近期订单统计报表', '2019-02-20 15:53:06');
INSERT INTO `schedule_job`(`bean_name`, `method_name`, `params`, `cron_expression`, `status`, `remark`, `create_time`) VALUES ('CustomerTask', 'updateCustomerMsgRpt', NULL, '0 59 23 * * ? *', 0, '更新用户统计信息', '2019-02-20 15:55:15');
INSERT INTO `schedule_job`(`bean_name`, `method_name`, `params`, `cron_expression`, `status`, `remark`, `create_time`) VALUES ('OrderTask', 'orderClose24h', NULL, '0 29 23 * * ? *', 0, '关闭24小时未支付订单', '2019-03-11 16:30:29');
INSERT INTO `schedule_job`(`bean_name`, `method_name`, `params`, `cron_expression`, `status`, `remark`, `create_time`) VALUES ('OrderTask', 'orderFinish1h', NULL, '0 0 */1 * * ?', 0, '完成1小时支付完成的订单', '2019-05-5 16:30:29');


-- ----------------------------
-- Table structure for `schedule_job_log`
-- ----------------------------
DROP TABLE IF EXISTS `schedule_job_log`;
CREATE TABLE `schedule_job_log` (
  `log_id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '任务日志id',
  `job_id` bigint(20) NOT NULL COMMENT '任务id',
  `bean_name` varchar(200) DEFAULT NULL COMMENT 'spring bean名称',
  `method_name` varchar(100) DEFAULT NULL COMMENT '方法名',
  `params` varchar(2000) DEFAULT NULL COMMENT '参数',
  `status` tinyint(4) NOT NULL COMMENT '任务状态    0：成功    1：失败',
  `error` varchar(2000) DEFAULT NULL COMMENT '失败信息',
  `times` int(11) NOT NULL COMMENT '耗时(单位：毫秒)',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  PRIMARY KEY (`log_id`),
  KEY `job_id` (`job_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='定时任务日志';

-- ----------------------------
-- Records of schedule_job_log
-- ----------------------------




-- ----------------------------
-- Table structure for `QRTZ_CALENDARS`
-- ----------------------------
DROP TABLE IF EXISTS `QRTZ_CALENDARS`;
CREATE TABLE `QRTZ_CALENDARS` (
  `SCHED_NAME` varchar(120) NOT NULL,
  `CALENDAR_NAME` varchar(200) NOT NULL,
  `CALENDAR` blob NOT NULL,
  PRIMARY KEY (`SCHED_NAME`,`CALENDAR_NAME`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of QRTZ_CALENDARS
-- ----------------------------


-- ----------------------------
-- Table structure for `QRTZ_FIRED_TRIGGERS`
-- ----------------------------
DROP TABLE IF EXISTS `QRTZ_FIRED_TRIGGERS`;
CREATE TABLE `QRTZ_FIRED_TRIGGERS` (
  `SCHED_NAME` varchar(120) NOT NULL,
  `ENTRY_ID` varchar(95) NOT NULL,
  `TRIGGER_NAME` varchar(200) NOT NULL,
  `TRIGGER_GROUP` varchar(200) NOT NULL,
  `INSTANCE_NAME` varchar(200) NOT NULL,
  `FIRED_TIME` bigint(13) NOT NULL,
  `SCHED_TIME` bigint(13) NOT NULL,
  `PRIORITY` int(11) NOT NULL,
  `STATE` varchar(16) NOT NULL,
  `JOB_NAME` varchar(200) DEFAULT NULL,
  `JOB_GROUP` varchar(200) DEFAULT NULL,
  `IS_NONCONCURRENT` varchar(1) DEFAULT NULL,
  `REQUESTS_RECOVERY` varchar(1) DEFAULT NULL,
  PRIMARY KEY (`SCHED_NAME`,`ENTRY_ID`),
  KEY `IDX_QRTZ_FT_TRIG_INST_NAME` (`SCHED_NAME`,`INSTANCE_NAME`),
  KEY `IDX_QRTZ_FT_INST_JOB_REQ_RCVRY` (`SCHED_NAME`,`INSTANCE_NAME`,`REQUESTS_RECOVERY`),
  KEY `IDX_QRTZ_FT_J_G` (`SCHED_NAME`,`JOB_NAME`,`JOB_GROUP`),
  KEY `IDX_QRTZ_FT_JG` (`SCHED_NAME`,`JOB_GROUP`),
  KEY `IDX_QRTZ_FT_T_G` (`SCHED_NAME`,`TRIGGER_NAME`,`TRIGGER_GROUP`),
  KEY `IDX_QRTZ_FT_TG` (`SCHED_NAME`,`TRIGGER_GROUP`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of QRTZ_FIRED_TRIGGERS
-- ----------------------------


-- ----------------------------
-- Table structure for `QRTZ_JOB_DETAILS`
-- ----------------------------
DROP TABLE IF EXISTS `QRTZ_JOB_DETAILS`;
CREATE TABLE `QRTZ_JOB_DETAILS` (
  `SCHED_NAME` varchar(120) NOT NULL,
  `JOB_NAME` varchar(200) NOT NULL,
  `JOB_GROUP` varchar(200) NOT NULL,
  `DESCRIPTION` varchar(250) DEFAULT NULL,
  `JOB_CLASS_NAME` varchar(250) NOT NULL,
  `IS_DURABLE` varchar(1) NOT NULL,
  `IS_NONCONCURRENT` varchar(1) NOT NULL,
  `IS_UPDATE_DATA` varchar(1) NOT NULL,
  `REQUESTS_RECOVERY` varchar(1) NOT NULL,
  `JOB_DATA` blob,
  PRIMARY KEY (`SCHED_NAME`,`JOB_NAME`,`JOB_GROUP`),
  KEY `IDX_QRTZ_J_REQ_RECOVERY` (`SCHED_NAME`,`REQUESTS_RECOVERY`),
  KEY `IDX_QRTZ_J_GRP` (`SCHED_NAME`,`JOB_GROUP`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of QRTZ_JOB_DETAILS
-- ----------------------------
-- INSERT INTO `QRTZ_JOB_DETAILS` VALUES ('PlatformScheduler', 'TASK_1', 'DEFAULT', null, 'com.platform.utils.ScheduleJob', '0', '0', '0', '0', 0xACED0005737200156F72672E71756172747A2E4A6F62446174614D61709FB083E8BFA9B0CB020000787200266F72672E71756172747A2E7574696C732E537472696E674B65794469727479466C61674D61708208E8C3FBC55D280200015A0013616C6C6F77735472616E7369656E74446174617872001D6F72672E71756172747A2E7574696C732E4469727479466C61674D617013E62EAD28760ACE0200025A000564697274794C00036D617074000F4C6A6176612F7574696C2F4D61703B787001737200116A6176612E7574696C2E486173684D61700507DAC1C31660D103000246000A6C6F6164466163746F724900097468726573686F6C6478703F4000000000000C7708000000100000000174000D4A4F425F504152414D5F4B455973720025636F6D2E706C6174666F726D2E656E746974792E5363686564756C654A6F62456E7469747900000000000000010200084C00086265616E4E616D657400124C6A6176612F6C616E672F537472696E673B4C000A63726561746554696D657400104C6A6176612F7574696C2F446174653B4C000E63726F6E45787072657373696F6E71007E00094C00056A6F6249647400104C6A6176612F6C616E672F4C6F6E673B4C000A6D6574686F644E616D6571007E00094C0006706172616D7371007E00094C000672656D61726B71007E00094C00067374617475737400134C6A6176612F6C616E672F496E74656765723B7870740008746573745461736B7372000E6A6176612E7574696C2E44617465686A81014B5974190300007870770800000158BAF593307874000E3020302F3330202A202A202A203F7372000E6A6176612E6C616E672E4C6F6E673B8BE490CC8F23DF0200014A000576616C7565787200106A6176612E6C616E672E4E756D62657286AC951D0B94E08B0200007870000000000000000174000474657374740008706C6174666F726D74000FE69C89E58F82E695B0E6B58BE8AF95737200116A6176612E6C616E672E496E746567657212E2A0A4F781873802000149000576616C75657871007E0013000000017800);
-- INSERT INTO `QRTZ_JOB_DETAILS` VALUES ('PlatformScheduler', 'TASK_2', 'DEFAULT', null, 'com.platform.utils.ScheduleJob', '0', '0', '0', '0', 0xACED0005737200156F72672E71756172747A2E4A6F62446174614D61709FB083E8BFA9B0CB020000787200266F72672E71756172747A2E7574696C732E537472696E674B65794469727479466C61674D61708208E8C3FBC55D280200015A0013616C6C6F77735472616E7369656E74446174617872001D6F72672E71756172747A2E7574696C732E4469727479466C61674D617013E62EAD28760ACE0200025A000564697274794C00036D617074000F4C6A6176612F7574696C2F4D61703B787001737200116A6176612E7574696C2E486173684D61700507DAC1C31660D103000246000A6C6F6164466163746F724900097468726573686F6C6478703F4000000000000C7708000000100000000174000D4A4F425F504152414D5F4B455973720025636F6D2E706C6174666F726D2E656E746974792E5363686564756C654A6F62456E7469747900000000000000010200084C00086265616E4E616D657400124C6A6176612F6C616E672F537472696E673B4C000A63726561746554696D657400104C6A6176612F7574696C2F446174653B4C000E63726F6E45787072657373696F6E71007E00094C00056A6F6249647400104C6A6176612F6C616E672F4C6F6E673B4C000A6D6574686F644E616D6571007E00094C0006706172616D7371007E00094C000672656D61726B71007E00094C00067374617475737400134C6A6176612F6C616E672F496E74656765723B7870740008746573745461736B7372000E6A6176612E7574696C2E44617465686A81014B5974190300007870770800000158C377C4607874000E3020302F3330202A202A202A203F7372000E6A6176612E6C616E672E4C6F6E673B8BE490CC8F23DF0200014A000576616C7565787200106A6176612E6C616E672E4E756D62657286AC951D0B94E08B0200007870000000000000000274000574657374327074000FE697A0E58F82E695B0E6B58BE8AF95737200116A6176612E6C616E672E496E746567657212E2A0A4F781873802000149000576616C75657871007E0013000000017800);

-- ----------------------------
-- Table structure for `QRTZ_LOCKS`
-- ----------------------------
DROP TABLE IF EXISTS `QRTZ_LOCKS`;
CREATE TABLE `QRTZ_LOCKS` (
  `SCHED_NAME` varchar(120) NOT NULL,
  `LOCK_NAME` varchar(40) NOT NULL,
  PRIMARY KEY (`SCHED_NAME`,`LOCK_NAME`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of QRTZ_LOCKS
-- ----------------------------
INSERT INTO `QRTZ_LOCKS` VALUES ('PlatformScheduler', 'STATE_ACCESS');
INSERT INTO `QRTZ_LOCKS` VALUES ('PlatformScheduler', 'TRIGGER_ACCESS');

-- ----------------------------
-- Table structure for `QRTZ_PAUSED_TRIGGER_GRPS`
-- ----------------------------
DROP TABLE IF EXISTS `QRTZ_PAUSED_TRIGGER_GRPS`;
CREATE TABLE `QRTZ_PAUSED_TRIGGER_GRPS` (
  `SCHED_NAME` varchar(120) NOT NULL,
  `TRIGGER_GROUP` varchar(200) NOT NULL,
  PRIMARY KEY (`SCHED_NAME`,`TRIGGER_GROUP`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of QRTZ_PAUSED_TRIGGER_GRPS
-- ----------------------------

-- ----------------------------
-- Table structure for `QRTZ_SCHEDULER_STATE`
-- ----------------------------
DROP TABLE IF EXISTS `QRTZ_SCHEDULER_STATE`;
CREATE TABLE `QRTZ_SCHEDULER_STATE` (
  `SCHED_NAME` varchar(120) NOT NULL,
  `INSTANCE_NAME` varchar(200) NOT NULL,
  `LAST_CHECKIN_TIME` bigint(13) NOT NULL,
  `CHECKIN_INTERVAL` bigint(13) NOT NULL,
  PRIMARY KEY (`SCHED_NAME`,`INSTANCE_NAME`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of QRTZ_SCHEDULER_STATE
-- ----------------------------
-- INSERT INTO `QRTZ_SCHEDULER_STATE` VALUES ('PlatformScheduler', 'Win_PC1508754695596', '1508756226419', '15000');


-- ----------------------------
-- Table structure for `QRTZ_TRIGGERS`
-- ----------------------------
DROP TABLE IF EXISTS `QRTZ_TRIGGERS`;
CREATE TABLE `QRTZ_TRIGGERS` (
  `SCHED_NAME` varchar(120) NOT NULL,
  `TRIGGER_NAME` varchar(200) NOT NULL,
  `TRIGGER_GROUP` varchar(200) NOT NULL,
  `JOB_NAME` varchar(200) NOT NULL,
  `JOB_GROUP` varchar(200) NOT NULL,
  `DESCRIPTION` varchar(250) DEFAULT NULL,
  `NEXT_FIRE_TIME` bigint(13) DEFAULT NULL,
  `PREV_FIRE_TIME` bigint(13) DEFAULT NULL,
  `PRIORITY` int(11) DEFAULT NULL,
  `TRIGGER_STATE` varchar(16) NOT NULL,
  `TRIGGER_TYPE` varchar(8) NOT NULL,
  `START_TIME` bigint(13) NOT NULL,
  `END_TIME` bigint(13) DEFAULT NULL,
  `CALENDAR_NAME` varchar(200) DEFAULT NULL,
  `MISFIRE_INSTR` smallint(2) DEFAULT NULL,
  `JOB_DATA` blob,
  PRIMARY KEY (`SCHED_NAME`,`TRIGGER_NAME`,`TRIGGER_GROUP`),
  KEY `IDX_QRTZ_T_J` (`SCHED_NAME`,`JOB_NAME`,`JOB_GROUP`),
  KEY `IDX_QRTZ_T_JG` (`SCHED_NAME`,`JOB_GROUP`),
  KEY `IDX_QRTZ_T_C` (`SCHED_NAME`,`CALENDAR_NAME`),
  KEY `IDX_QRTZ_T_G` (`SCHED_NAME`,`TRIGGER_GROUP`),
  KEY `IDX_QRTZ_T_STATE` (`SCHED_NAME`,`TRIGGER_STATE`),
  KEY `IDX_QRTZ_T_N_STATE` (`SCHED_NAME`,`TRIGGER_NAME`,`TRIGGER_GROUP`,`TRIGGER_STATE`),
  KEY `IDX_QRTZ_T_N_G_STATE` (`SCHED_NAME`,`TRIGGER_GROUP`,`TRIGGER_STATE`),
  KEY `IDX_QRTZ_T_NEXT_FIRE_TIME` (`SCHED_NAME`,`NEXT_FIRE_TIME`),
  KEY `IDX_QRTZ_T_NFT_ST` (`SCHED_NAME`,`TRIGGER_STATE`,`NEXT_FIRE_TIME`),
  KEY `IDX_QRTZ_T_NFT_MISFIRE` (`SCHED_NAME`,`MISFIRE_INSTR`,`NEXT_FIRE_TIME`),
  KEY `IDX_QRTZ_T_NFT_ST_MISFIRE` (`SCHED_NAME`,`MISFIRE_INSTR`,`NEXT_FIRE_TIME`,`TRIGGER_STATE`),
  KEY `IDX_QRTZ_T_NFT_ST_MISFIRE_GRP` (`SCHED_NAME`,`MISFIRE_INSTR`,`NEXT_FIRE_TIME`,`TRIGGER_GROUP`,`TRIGGER_STATE`),
  CONSTRAINT `QRTZ_TRIGGERS_ibfk_1` FOREIGN KEY (`SCHED_NAME`, `JOB_NAME`, `JOB_GROUP`) REFERENCES `QRTZ_JOB_DETAILS` (`SCHED_NAME`, `JOB_NAME`, `JOB_GROUP`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of QRTZ_TRIGGERS
-- ----------------------------
-- INSERT INTO `QRTZ_TRIGGERS` VALUES ('PlatformScheduler', 'TASK_1', 'DEFAULT', 'TASK_1', 'DEFAULT', null, '1507390200000', '-1', '5', 'PAUSED', 'CRON', '1507388787000', '0', null, '2', 0xACED0005737200156F72672E71756172747A2E4A6F62446174614D61709FB083E8BFA9B0CB020000787200266F72672E71756172747A2E7574696C732E537472696E674B65794469727479466C61674D61708208E8C3FBC55D280200015A0013616C6C6F77735472616E7369656E74446174617872001D6F72672E71756172747A2E7574696C732E4469727479466C61674D617013E62EAD28760ACE0200025A000564697274794C00036D617074000F4C6A6176612F7574696C2F4D61703B787001737200116A6176612E7574696C2E486173684D61700507DAC1C31660D103000246000A6C6F6164466163746F724900097468726573686F6C6478703F4000000000000C7708000000100000000174000D4A4F425F504152414D5F4B455973720025636F6D2E706C6174666F726D2E656E746974792E5363686564756C654A6F62456E7469747900000000000000010200084C00086265616E4E616D657400124C6A6176612F6C616E672F537472696E673B4C000A63726561746554696D657400104C6A6176612F7574696C2F446174653B4C000E63726F6E45787072657373696F6E71007E00094C00056A6F6249647400104C6A6176612F6C616E672F4C6F6E673B4C000A6D6574686F644E616D6571007E00094C0006706172616D7371007E00094C000672656D61726B71007E00094C00067374617475737400134C6A6176612F6C616E672F496E74656765723B7870740008746573745461736B7372000E6A6176612E7574696C2E44617465686A81014B5974190300007870770800000158BAF593307874000E3020302F3330202A202A202A203F7372000E6A6176612E6C616E672E4C6F6E673B8BE490CC8F23DF0200014A000576616C7565787200106A6176612E6C616E672E4E756D62657286AC951D0B94E08B0200007870000000000000000174000474657374740008706C6174666F726D74000FE69C89E58F82E695B0E6B58BE8AF95737200116A6176612E6C616E672E496E746567657212E2A0A4F781873802000149000576616C75657871007E0013000000017800);
-- INSERT INTO `QRTZ_TRIGGERS` VALUES ('PlatformScheduler', 'TASK_2', 'DEFAULT', 'TASK_2', 'DEFAULT', null, '1507390200000', '-1', '5', 'PAUSED', 'CRON', '1507388787000', '0', null, '2', 0xACED0005737200156F72672E71756172747A2E4A6F62446174614D61709FB083E8BFA9B0CB020000787200266F72672E71756172747A2E7574696C732E537472696E674B65794469727479466C61674D61708208E8C3FBC55D280200015A0013616C6C6F77735472616E7369656E74446174617872001D6F72672E71756172747A2E7574696C732E4469727479466C61674D617013E62EAD28760ACE0200025A000564697274794C00036D617074000F4C6A6176612F7574696C2F4D61703B787001737200116A6176612E7574696C2E486173684D61700507DAC1C31660D103000246000A6C6F6164466163746F724900097468726573686F6C6478703F4000000000000C7708000000100000000174000D4A4F425F504152414D5F4B455973720025636F6D2E706C6174666F726D2E656E746974792E5363686564756C654A6F62456E7469747900000000000000010200084C00086265616E4E616D657400124C6A6176612F6C616E672F537472696E673B4C000A63726561746554696D657400104C6A6176612F7574696C2F446174653B4C000E63726F6E45787072657373696F6E71007E00094C00056A6F6249647400104C6A6176612F6C616E672F4C6F6E673B4C000A6D6574686F644E616D6571007E00094C0006706172616D7371007E00094C000672656D61726B71007E00094C00067374617475737400134C6A6176612F6C616E672F496E74656765723B7870740008746573745461736B7372000E6A6176612E7574696C2E44617465686A81014B5974190300007870770800000158C377C4607874000E3020302F3330202A202A202A203F7372000E6A6176612E6C616E672E4C6F6E673B8BE490CC8F23DF0200014A000576616C7565787200106A6176612E6C616E672E4E756D62657286AC951D0B94E08B0200007870000000000000000274000574657374327074000FE697A0E58F82E695B0E6B58BE8AF95737200116A6176612E6C616E672E496E746567657212E2A0A4F781873802000149000576616C75657871007E0013000000017800);

-- ----------------------------
-- Table structure for `QRTZ_BLOB_TRIGGERS`
-- ----------------------------
DROP TABLE IF EXISTS `QRTZ_BLOB_TRIGGERS`;
CREATE TABLE `QRTZ_BLOB_TRIGGERS` (
  `SCHED_NAME` varchar(120) NOT NULL,
  `TRIGGER_NAME` varchar(200) NOT NULL,
  `TRIGGER_GROUP` varchar(200) NOT NULL,
  `BLOB_DATA` blob,
  PRIMARY KEY (`SCHED_NAME`,`TRIGGER_NAME`,`TRIGGER_GROUP`),
  KEY `SCHED_NAME` (`SCHED_NAME`,`TRIGGER_NAME`,`TRIGGER_GROUP`),
  CONSTRAINT `QRTZ_BLOB_TRIGGERS_ibfk_1` FOREIGN KEY (`SCHED_NAME`, `TRIGGER_NAME`, `TRIGGER_GROUP`) REFERENCES `QRTZ_TRIGGERS` (`SCHED_NAME`, `TRIGGER_NAME`, `TRIGGER_GROUP`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of QRTZ_BLOB_TRIGGERS
-- ----------------------------


-- ----------------------------
-- Table structure for `QRTZ_CRON_TRIGGERS`
-- ----------------------------
DROP TABLE IF EXISTS `QRTZ_CRON_TRIGGERS`;
CREATE TABLE `QRTZ_CRON_TRIGGERS` (
  `SCHED_NAME` varchar(120) NOT NULL,
  `TRIGGER_NAME` varchar(200) NOT NULL,
  `TRIGGER_GROUP` varchar(200) NOT NULL,
  `CRON_EXPRESSION` varchar(120) NOT NULL,
  `TIME_ZONE_ID` varchar(80) DEFAULT NULL,
  PRIMARY KEY (`SCHED_NAME`,`TRIGGER_NAME`,`TRIGGER_GROUP`),
  CONSTRAINT `QRTZ_CRON_TRIGGERS_ibfk_1` FOREIGN KEY (`SCHED_NAME`, `TRIGGER_NAME`, `TRIGGER_GROUP`) REFERENCES `QRTZ_TRIGGERS` (`SCHED_NAME`, `TRIGGER_NAME`, `TRIGGER_GROUP`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of QRTZ_CRON_TRIGGERS
-- ----------------------------
-- INSERT INTO `QRTZ_CRON_TRIGGERS` VALUES ('PlatformScheduler', 'TASK_1', 'DEFAULT', '0 0/30 * * * ?', 'Asia/Shanghai');
-- INSERT INTO `QRTZ_CRON_TRIGGERS` VALUES ('PlatformScheduler', 'TASK_2', 'DEFAULT', '0 0/30 * * * ?', 'Asia/Shanghai');


-- ----------------------------
-- Table structure for `QRTZ_SIMPLE_TRIGGERS`
-- ----------------------------
DROP TABLE IF EXISTS `QRTZ_SIMPLE_TRIGGERS`;
CREATE TABLE `QRTZ_SIMPLE_TRIGGERS` (
  `SCHED_NAME` varchar(120) NOT NULL,
  `TRIGGER_NAME` varchar(200) NOT NULL,
  `TRIGGER_GROUP` varchar(200) NOT NULL,
  `REPEAT_COUNT` bigint(7) NOT NULL,
  `REPEAT_INTERVAL` bigint(12) NOT NULL,
  `TIMES_TRIGGERED` bigint(10) NOT NULL,
  PRIMARY KEY (`SCHED_NAME`,`TRIGGER_NAME`,`TRIGGER_GROUP`),
  CONSTRAINT `QRTZ_SIMPLE_TRIGGERS_ibfk_1` FOREIGN KEY (`SCHED_NAME`, `TRIGGER_NAME`, `TRIGGER_GROUP`) REFERENCES `QRTZ_TRIGGERS` (`SCHED_NAME`, `TRIGGER_NAME`, `TRIGGER_GROUP`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of QRTZ_SIMPLE_TRIGGERS
-- ----------------------------

-- ----------------------------
-- Table structure for `QRTZ_SIMPROP_TRIGGERS`
-- ----------------------------
DROP TABLE IF EXISTS `QRTZ_SIMPROP_TRIGGERS`;
CREATE TABLE `QRTZ_SIMPROP_TRIGGERS` (
  `SCHED_NAME` varchar(120) NOT NULL,
  `TRIGGER_NAME` varchar(200) NOT NULL,
  `TRIGGER_GROUP` varchar(200) NOT NULL,
  `STR_PROP_1` varchar(512) DEFAULT NULL,
  `STR_PROP_2` varchar(512) DEFAULT NULL,
  `STR_PROP_3` varchar(512) DEFAULT NULL,
  `INT_PROP_1` int(11) DEFAULT NULL,
  `INT_PROP_2` int(11) DEFAULT NULL,
  `LONG_PROP_1` bigint(20) DEFAULT NULL,
  `LONG_PROP_2` bigint(20) DEFAULT NULL,
  `DEC_PROP_1` decimal(13,4) DEFAULT NULL,
  `DEC_PROP_2` decimal(13,4) DEFAULT NULL,
  `BOOL_PROP_1` varchar(1) DEFAULT NULL,
  `BOOL_PROP_2` varchar(1) DEFAULT NULL,
  PRIMARY KEY (`SCHED_NAME`,`TRIGGER_NAME`,`TRIGGER_GROUP`),
  CONSTRAINT `QRTZ_SIMPROP_TRIGGERS_ibfk_1` FOREIGN KEY (`SCHED_NAME`, `TRIGGER_NAME`, `TRIGGER_GROUP`) REFERENCES `QRTZ_TRIGGERS` (`SCHED_NAME`, `TRIGGER_NAME`, `TRIGGER_GROUP`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of QRTZ_SIMPROP_TRIGGERS
-- ----------------------------



-- ----------------------------
-- Table structure for `tb_token`
-- ----------------------------
DROP TABLE IF EXISTS `tb_token`;
CREATE TABLE `tb_token` (
  `user_id` bigint(20) NOT NULL,
  `token` varchar(100) NOT NULL COMMENT 'token',
  `expire_time` datetime DEFAULT NULL COMMENT '过期时间',
  `update_time` datetime DEFAULT NULL COMMENT '更新时间',
  PRIMARY KEY (`user_id`),
  UNIQUE KEY `token` (`token`),
  KEY `expire_time` (`expire_time`),
  KEY `update_time` (`update_time`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='用户Token';
-- ------------------------------------- 
-- 清空往下的菜单项
truncate table sys_menu;

-- -- 用户管理
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (0, '用户管理', NULL, NULL, 0, 'fa fa-user-circle-o', -6, 0);
set @parentid_id = @@identity;

-- 鼎鑫权益
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '鼎鑫权益', 'coupon/coupon/couponuser.html', NULL, 1, 'fa fa-user', 0, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查询', NULL, 'couponuser:list,couponuser:info', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '修改', NULL, 'couponuser:update', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '删除', NULL, 'couponuser:delete', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '更多信息', NULL, 'couponuser:moremsg', 2, NULL, 0, 0);


-- 惠友圈
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '精明拾惠', 'coupon/coupon/couponuser-hy.html', NULL, 1, 'fa fa-user-o', 0, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查询', NULL, 'couponuser:listhy', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查看详情', NULL, 'couponuser:infohy', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '修改', NULL, 'couponuser:updatehy', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '删除', NULL, 'couponuser:deletehy', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '设为平台推广员', NULL, 'couponuser:updatehy-tomanager', 2, NULL, 0, 0);

-- 信用分
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '信用分', 'coupon/coupon/couponusercreditinfo.html	', NULL, 1, 'fa fa-credit-card-alt', 0, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查看', NULL, 'couponusercreditinfo:list,couponusercreditinfo:info	', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '修改', NULL, 'couponusercreditinfo:updateCredit', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '更多信息', NULL, 'couponuser:creditMsg', 2, NULL, 0, 0);

-- -- 商品管理
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( 0, '商品管理', NULL, NULL, 0, 'fa fa-shopping-bag', -5, 0);
set @parentid_id = @@identity;

-- 商品种类
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '商品种类', 'coupon/coupon/couponcategory.html', NULL, 1, 'fa fa-sun-o', 0, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查询', NULL, 'couponcategory:list,couponcategory:info', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '添加', NULL, 'couponcategory:save', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '修改', NULL, 'couponcategory:update', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '启用禁用', NULL, 'couponcategory:changeenable', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '删除', NULL, 'couponcategory:delete', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '选择上级菜单', NULL, 'couponcategory:select', 2, NULL, 0, 0);


-- 商品列表
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '商品列表', 'coupon/coupon/coupongoodsinfo.html', NULL, 1, 'fa fa-shopping-bag', 0, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查看', NULL, 'coupongoodsinfo:list,coupongoodsinfo:info', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '新增', NULL, 'coupongoodsinfo:save', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '修改', NULL, 'coupongoodsinfo:update', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '删除', NULL, 'coupongoodsinfo:delete', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '上架', NULL, 'coupongoodsinfo:upperShelf', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '下架', NULL, 'coupongoodsinfo:soldOut', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '批量上传', NULL, 'coupongoodsinfo:batchAdd', 2, NULL, 0, 0);

-- 收藏管理
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid_id, '收藏管理', 'coupon/coupon/couponcollect.html', NULL, 1, 'fa fa-star', 3, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu` (`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) SELECT @parentid, '查看', null, 'couponcollect:list,couponcollect:info', '2', null, '6', 0;
INSERT INTO `sys_menu` (`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) SELECT @parentid, '删除', null, 'couponcollect:delete', '2', null, '6', 0;

-- -- 推广管理
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( 0, '推广管理', NULL, NULL, 0, 'fa fa-external-link', -4, 0);
set @parentid_id = @@identity;
-- 平台推广员
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '平台推广员', 'coupon/coupon/couponuserplat.html', NULL, 1, 'fa fa-user-circle', 0, 0);
set @parentid = @@identity;

INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查看', NULL, 'couponuser:listtg,couponuser:infotg', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '修改', NULL, 'couponuser:updatetg', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '取消推广员', NULL, 'couponuser:updateExtend', 2, NULL, 0, 0);



-- -- 订单管理
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( 0, '订单管理', NULL, NULL, 0, 'fa fa-sitemap', -3, 0);
set @parentid_id = @@identity;

-- 订单列表
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '订单列表', 'coupon/coupon/couponorder.html', NULL, 1, 'fa fa-sitemap', 0, 0);
set @parentid = @@identity;

INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查看', NULL, 'Couponorder:list,Couponorder:info', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '添加', NULL, 'Couponorder:save', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '修改', NULL, 'Couponorder:update', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '删除', NULL, 'Couponorder:delete', 2, NULL, 0, 0);

-- 纠纷列表
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '纠纷列表', 'coupon/coupon/couponissuehandle.html', NULL, 1, 'fa fa-question-circle-o', 0, 0);
set @parentid = @@identity;

INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查看', NULL, 'couponissuehandle:list,couponissuehandle:info', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '处理', NULL, 'couponissuehandle:handle', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查看订单信息', NULL, 'couponissuehandle:ordermsg', 2, NULL, 0, 0);

-- 提现申请
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '提现申请', 'coupon/coupon/couponcashdrawal.html', NULL, 1, 'fa fa-cny', 0, 0);
set @parentid = @@identity;

INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查看', NULL, 'couponcashdrawal:list,couponcashdrawal:info', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '处理', NULL, 'couponcashdrawal:handle', 2, NULL, 0, 0);


-- -- 财务报表
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( 0, '财务报表', NULL, NULL, 0, 'fa fa-list-alt', -2, 0);
set @parentid_id = @@identity;

-- 资金明细
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '资金明细', 'coupon/coupon/couponwalletinfo.html', NULL, 1, 'fa fa-credit-card', 0, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查看', NULL, 'couponwalletinfo:list,couponwalletinfo:info', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '导出Excel', NULL, 'couponwalletinfo:listcountexcel', 2, NULL, 0, 0);

-- 佣金明细
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '佣金明细', 'coupon/coupon/couponcommissioninfo.html', NULL, 1, 'fa fa-bar-chart', 0, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查看', NULL, 'couponwalletinfo:listm,couponwalletinfo:infom', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '导出Excel', NULL, 'couponwalletinfo:listCommissionExcel', 2, NULL, 0, 0);

-- 商品明细
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '商品明细', 'coupon/coupon/couponorderinfo.html', NULL, 1, 'fa fa-bar-chart', 0, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查看', NULL, 'Couponorder:listInfo', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '导出Excel', NULL, 'Couponorder:listGoodsExcel', 2, NULL, 0, 0);


-- -- 系统管理
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( 0, '系统管理', NULL, NULL, 0, 'fa fa-cog', -1, 0);
set @parentid_id = @@identity;

INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid_id, '近期下单情况', NULL, 'couponeptordereday:list', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid_id, '近期客户活跃情况', NULL, 'couponeptusereday:list', 2, NULL, 0, 0);

-- 管理员列表
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid_id, '管理员列表', 'sys/user.html', NULL, 1, 'fa fa-user', 1, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '查看', NULL, 'sys:user:list,sys:user:info', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '新增', NULL, 'sys:user:save,sys:role:select', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '修改', NULL, 'sys:user:update,sys:role:select', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '删除', NULL, 'sys:user:delete', 2, NULL, 0, 0);

-- 角色管理
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid_id, '角色管理', 'sys/role.html', NULL, 1, 'fa fa-user-secret', 1, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '查看', NULL, 'sys:role:list,sys:role:info', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '新增', NULL, 'sys:role:save,sys:menu:perms', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '修改', NULL, 'sys:role:update,sys:menu:perms', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '删除', NULL, 'sys:role:delete', 2, NULL, 0, 0);


-- 部门管理
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid_id, '部门管理', 'sys/dept.html', NULL, 1, 'fa fa-sitemap', 3, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '查看', NULL, 'sys:dept:list,sys:dept:info', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '新增', NULL, 'sys:dept:save', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '修改', NULL, 'sys:dept:update', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '删除', NULL, 'sys:dept:delete', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '选择部门', NULL, 'sys:dept:select', 2, NULL, 0, 0);


-- 短信配置
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid_id, '短信配置', 'sys/smslog.html', NULL, 1, 'fa fa-envelope-open', 1, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '查看', NULL, 'sys:smslog:list,sys:smslog:info', 2, NULL, 0, 0);

-- 操作日志
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid_id, '操作日志', 'sys/sysoperlog.html', NULL, 1, 'fa fa-envelope-open', 1, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '查看', NULL, 'sysoperlog:list,sysoperlog:info', 2, NULL, 0, 0);

-- 菜单管理
-- INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid_id, '菜单管理', 'sys/menu.html', NULL, 1, 'fa fa-folder-open', 4, 0);
-- set @parentid = @@identity;
-- INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '查看', NULL, 'sys:menu:list,sys:menu:info', 2, NULL, 0, 0);
-- INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '新增', NULL, 'sys:menu:save,sys:menu:select', 2, NULL, 0, 0);
-- INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '修改', NULL, 'sys:menu:update,sys:menu:select', 2, NULL, 0, 0);
-- INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '删除', NULL, 'sys:menu:delete', 2, NULL, 0, 0);

-- 阿里云文件配置

INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid_id, '图片服务器配置', 'sys/oss.html', 'sys:oss:all', 1, 'fa fa-file-image-o', 6, 0);

-- 系统自动任务
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid_id, '定时任务', 'sys/schedule.html', NULL, 1, 'fa fa-tasks', 5, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '查看', NULL, 'sys:schedule:list,sys:schedule:info', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '新增', NULL, 'sys:schedule:save', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '修改', NULL, 'sys:schedule:update', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '删除', NULL, 'sys:schedule:delete', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '暂停', NULL, 'sys:schedule:pause', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '恢复', NULL, 'sys:schedule:resume', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '立即执行', NULL, 'sys:schedule:run', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '日志列表', NULL, 'sys:schedule:log', 2, NULL, 0, 0);

-- 系统字典
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '系统字典', 'sys/macro.html', NULL, 1, 'fa fa-book', 6, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查看', NULL, 'sys:macro:list,sys:macro:info', 2, NULL, 6, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '新增', NULL, 'sys:macro:save', 2, NULL, 6, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '修改', NULL, 'sys:macro:update', 2, NULL, 6, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '删除', NULL, 'sys:macro:delete', 2, NULL, 6, 0);

-- 接口文档
-- INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '接口文档', 'swagger-ui.html', '', 1, 'fa fa-code', 0, 0);

-- 系统配置
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid_id, '商城配置', 'coupon/coupon/couponconfig.html', '', 1, 'fa fa-sun-o', 7, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '加载数据', NULL, 'coupon:config:load', 2, NULL, 6, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '保存', NULL, 'coupon:config:update', 2, NULL, 6, 0);

-- ------------------------------------- 
-- 清空往下的菜单项
-- delete from sys_menu  where menu_id >= 390;

-- -- 用户管理
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (0, '用户管理', NULL, NULL, 0, 'fa fa-user-circle-o', -6, 0);
set @parentid_id = @@identity;

-- 鼎鑫权益
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '鼎鑫权益', 'coupon/couponuser.html', NULL, 1, 'fa fa-user', 0, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查询', NULL, 'couponuser:list,couponuser:info', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '修改', NULL, 'couponuser:update', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '删除', NULL, 'couponuser:delete', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '更多信息', NULL, 'couponuser:moremsg', 2, NULL, 0, 0);


-- 惠友圈
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '精明拾惠', 'coupon/couponuser-hy.html', NULL, 1, 'fa fa-user-o', 0, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查询', NULL, 'couponuser:listhy', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查看详情', NULL, 'couponuser:infohy', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '修改', NULL, 'couponuser:updatehy', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '删除', NULL, 'couponuser:deletehy', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '设为平台推广员', NULL, 'couponuser:updatehy-tomanager', 2, NULL, 0, 0);

-- 信用分
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '信用分', 'coupon/couponusercreditinfo.html	', NULL, 1, 'fa fa-credit-card-alt', 0, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查看', NULL, 'couponusercreditinfo:list,couponusercreditinfo:info	', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '修改', NULL, 'couponusercreditinfo:updateCredit', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '更多信息', NULL, 'couponuser:creditMsg', 2, NULL, 0, 0);

-- -- 商品管理
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( 0, '商品管理', NULL, NULL, 0, 'fa fa-shopping-bag', -5, 0);
set @parentid_id = @@identity;

-- 商品种类
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '商品种类', 'coupon/couponcategory.html', NULL, 1, 'fa fa-sun-o', 0, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查询', NULL, 'couponcategory:list,couponcategory:info', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '添加', NULL, 'couponcategory:save', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '修改', NULL, 'couponcategory:update', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '启用禁用', NULL, 'couponcategory:changeenable', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '删除', NULL, 'couponcategory:delete', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '选择上级菜单', NULL, 'couponcategory:select', 2, NULL, 0, 0);


-- 商品列表
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '商品列表', 'coupon/coupongoodsinfo.html', NULL, 1, 'fa fa-shopping-bag', 0, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查看', NULL, 'coupongoodsinfo:list,coupongoodsinfo:info', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '新增', NULL, 'coupongoodsinfo:save', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '修改', NULL, 'coupongoodsinfo:update', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '删除', NULL, 'coupongoodsinfo:delete', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '上架', NULL, 'coupongoodsinfo:upperShelf', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '下架', NULL, 'coupongoodsinfo:soldOut', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '批量上传', NULL, 'coupongoodsinfo:batchAdd', 2, NULL, 0, 0);

-- 收藏管理
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid_id, '收藏管理', 'coupon/couponcollect.html', NULL, 1, 'fa fa-star', 3, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu` (`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) SELECT @parentid, '查看', null, 'couponcollect:list,couponcollect:info', '2', null, '6', 0;
INSERT INTO `sys_menu` (`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) SELECT @parentid, '删除', null, 'couponcollect:delete', '2', null, '6', 0;

-- -- 推广管理
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( 0, '推广管理', NULL, NULL, 0, 'fa fa-external-link', -4, 0);
set @parentid_id = @@identity;
-- 平台推广员
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '平台推广员', 'coupon/couponuserplat.html', NULL, 1, 'fa fa-user-circle', 0, 0);
set @parentid = @@identity;

INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查看', NULL, 'couponuser:listtg,couponuser:infotg', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '修改', NULL, 'couponuser:updatetg', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '取消推广员', NULL, 'couponuser:updateExtend', 2, NULL, 0, 0);



-- -- 订单管理
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( 0, '订单管理', NULL, NULL, 0, 'fa fa-sitemap', -3, 0);
set @parentid_id = @@identity;

-- 订单列表
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '订单列表', 'coupon/couponorder.html', NULL, 1, 'fa fa-sitemap', 0, 0);
set @parentid = @@identity;

INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查看', NULL, 'Couponorder:list,Couponorder:info', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '添加', NULL, 'Couponorder:save', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '修改', NULL, 'Couponorder:update', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '删除', NULL, 'Couponorder:delete', 2, NULL, 0, 0);

-- 纠纷列表
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '纠纷列表', 'coupon/couponissuehandle.html', NULL, 1, 'fa fa-question-circle-o', 0, 0);
set @parentid = @@identity;

INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查看', NULL, 'couponissuehandle:list,couponissuehandle:info', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '处理', NULL, 'couponissuehandle:handle', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查看订单信息', NULL, 'couponissuehandle:ordermsg', 2, NULL, 0, 0);

-- 提现申请
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '提现申请', 'coupon/couponcashdrawal.html', NULL, 1, 'fa fa-cny', 0, 0);
set @parentid = @@identity;

INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查看', NULL, 'couponcashdrawal:list,couponcashdrawal:info', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '处理', NULL, 'couponcashdrawal:handle', 2, NULL, 0, 0);


-- -- 财务报表
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( 0, '财务报表', NULL, NULL, 0, 'fa fa-list-alt', -2, 0);
set @parentid_id = @@identity;

-- 资金明细
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '资金明细', 'coupon/couponwalletinfo.html', NULL, 1, 'fa fa-credit-card', 0, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查看', NULL, 'couponwalletinfo:list,couponwalletinfo:info', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '导出Excel', NULL, 'couponwalletinfo:listcountexcel', 2, NULL, 0, 0);

-- 佣金明细
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '佣金明细', 'coupon/couponcommissioninfo.html', NULL, 1, 'fa fa-bar-chart', 0, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查看', NULL, 'couponwalletinfo:listm,couponwalletinfo:infom', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '导出Excel', NULL, 'couponwalletinfo:listCommissionExcel', 2, NULL, 0, 0);

-- 商品明细
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '商品明细', 'coupon/couponorderinfo.html', NULL, 1, 'fa fa-bar-chart', 0, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查看', NULL, 'Couponorder:listInfo', 2, NULL, 0, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '导出Excel', NULL, 'Couponorder:listGoodsExcel', 2, NULL, 0, 0);


-- -- 系统管理
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( 0, '系统管理', NULL, NULL, 0, 'fa fa-cog', -1, 0);
set @parentid_id = @@identity;

INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid_id, '近期下单情况', NULL, 'couponeptordereday:list', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid_id, '近期客户活跃情况', NULL, 'couponeptusereday:list', 2, NULL, 0, 0);

-- 管理员列表
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid_id, '管理员列表', 'sys/user.html', NULL, 1, 'fa fa-user', 1, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '查看', NULL, 'sys:user:list,sys:user:info', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '新增', NULL, 'sys:user:save,sys:role:select', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '修改', NULL, 'sys:user:update,sys:role:select', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '删除', NULL, 'sys:user:delete', 2, NULL, 0, 0);

-- 角色管理
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid_id, '角色管理', 'sys/role.html', NULL, 1, 'fa fa-user-secret', 1, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '查看', NULL, 'sys:role:list,sys:role:info', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '新增', NULL, 'sys:role:save,sys:menu:perms', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '修改', NULL, 'sys:role:update,sys:menu:perms', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '删除', NULL, 'sys:role:delete', 2, NULL, 0, 0);


-- 部门管理
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid_id, '部门管理', 'sys/dept.html', NULL, 1, 'fa fa-sitemap', 3, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '查看', NULL, 'sys:dept:list,sys:dept:info', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '新增', NULL, 'sys:dept:save', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '修改', NULL, 'sys:dept:update', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '删除', NULL, 'sys:dept:delete', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '选择部门', NULL, 'sys:dept:select', 2, NULL, 0, 0);


-- 短信配置
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid_id, '短信配置', 'sys/smslog.html', NULL, 1, 'fa fa-envelope-open', 1, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '查看', NULL, 'sys:smslog:list,sys:smslog:info', 2, NULL, 0, 0);

-- 操作日志
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid_id, '操作日志', 'sys/sysoperlog.html', NULL, 1, 'fa fa-envelope-open', 1, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '查看', NULL, 'sysoperlog:list,sysoperlog:info', 2, NULL, 0, 0);

-- 菜单管理
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid_id, '菜单管理', 'sys/menu.html', NULL, 1, 'fa fa-folder-open', 4, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '查看', NULL, 'sys:menu:list,sys:menu:info', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '新增', NULL, 'sys:menu:save,sys:menu:select', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '修改', NULL, 'sys:menu:update,sys:menu:select', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '删除', NULL, 'sys:menu:delete', 2, NULL, 0, 0);

-- 阿里云文件配置

INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid_id, '图片服务器配置', 'sys/oss.html', 'sys:oss:all', 1, 'fa fa-file-image-o', 6, 0);

-- 系统自动任务
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid_id, '定时任务', 'sys/schedule.html', NULL, 1, 'fa fa-tasks', 5, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '查看', NULL, 'sys:schedule:list,sys:schedule:info', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '新增', NULL, 'sys:schedule:save', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '修改', NULL, 'sys:schedule:update', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '删除', NULL, 'sys:schedule:delete', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '暂停', NULL, 'sys:schedule:pause', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '恢复', NULL, 'sys:schedule:resume', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '立即执行', NULL, 'sys:schedule:run', 2, NULL, 0, 0);
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid, '日志列表', NULL, 'sys:schedule:log', 2, NULL, 0, 0);

-- 系统字典
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '系统字典', 'sys/macro.html', NULL, 1, 'fa fa-book', 6, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '查看', NULL, 'sys:macro:list,sys:macro:info', 2, NULL, 6, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '新增', NULL, 'sys:macro:save', 2, NULL, 6, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '修改', NULL, 'sys:macro:update', 2, NULL, 6, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '删除', NULL, 'sys:macro:delete', 2, NULL, 6, 0);

-- 接口文档
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid_id, '接口文档', 'swagger-ui.html', '', 1, 'fa fa-code', 0, 0);

-- 系统配置
INSERT INTO `sys_menu`(`parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES (@parentid_id, '商城配置', 'coupon/couponconfig.html', '', 1, 'fa fa-sun-o', 7, 0);
set @parentid = @@identity;
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '加载数据', NULL, 'coupon:config:load', 2, NULL, 6, 0);
INSERT INTO `sys_menu`( `parent_id`, `name`, `url`, `perms`, `type`, `icon`, `order_num`, `status`) VALUES ( @parentid, '保存', NULL, 'coupon:config:update', 2, NULL, 6, 0);

-- ------------------------------------- 
/**
 * a:ghost
 *纠纷处理表
 */
-- ----------------------------
-- Table structure for `coupon_issue_handle`
-- ----------------------------
DROP TABLE IF EXISTS `coupon_issue_handle`;
CREATE TABLE `coupon_issue_handle` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uid` int(11) NOT NULL COMMENT '用户id',
  `uname` varchar(40) DEFAULT '' COMMENT '用户名',
  `order_sn` varchar(50) DEFAULT '' COMMENT '订单号',
  `status` tinyint(2) DEFAULT 0 COMMENT '状态   0，待处理  1，已处理',
  `reason` varchar(200) DEFAULT '' COMMENT '申请原因',
  `msg` varchar(200) DEFAULT '' COMMENT '处理意见',
  `add_time` datetime DEFAULT NULL COMMENT '添加时间',
  `update_time` datetime DEFAULT NULL COMMENT '修改时间',
  `issue_type` tinyint(1) DEFAULT 1 COMMENT '状态   1，卖家问题  2，买家问题',
  
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `order_sn`(`order_sn`) USING BTREE,
  INDEX `status`(`status`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=66 DEFAULT CHARSET=utf8;

/**
 * a:ghost
 * 纠纷处理日志记录
 */
-- ----------------------------
-- Table structure for `coupon_issue_handle_log`
-- ----------------------------
DROP TABLE IF EXISTS `coupon_issue_handle_log`;
CREATE TABLE `coupon_issue_handle_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ih_id` int(11) NOT NULL COMMENT '纠纷Id',
  `uid` varchar(40) DEFAULT '' COMMENT '用户Id',
  `uname` varchar(40) DEFAULT '' COMMENT '用户名',
  `order_sn` varchar(50) DEFAULT '' COMMENT '订单号',
  `status` tinyint(2) DEFAULT 0 COMMENT '状态   0，待处理  1，已处理',
  `msg` varchar(200) DEFAULT '' COMMENT '处理意见',
  `title` varchar(100) DEFAULT '' COMMENT '标题',
  `content` varchar(200) DEFAULT '' COMMENT '内容',
  `reason` varchar(200) DEFAULT '' COMMENT '申请原因',
  `add_time` datetime DEFAULT NULL COMMENT '添加时间',
  `handler_id` int(11) DEFAULT 0 COMMENT '操作人Id',
  `handler_name` varchar(50) DEFAULT '' COMMENT '操作人名',
  
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `ih_id`(`ih_id`) USING BTREE,
  INDEX `order_sn`(`order_sn`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=66 DEFAULT CHARSET=utf8;-- ------------------------------------- 

/** 2019-2-14 11:11 每日订单状态统计表 **/
-- ----------------------------
-- Table structure for `coupon_ept_order_eday`
-- ----------------------------
DROP TABLE IF EXISTS `coupon_ept_order_eday`;
CREATE TABLE `coupon_ept_order_eday` (
  `id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT,
  `total` mediumint(8) DEFAULT 0 COMMENT '总下单数',
  `completed` mediumint(8) DEFAULT 0 COMMENT '完成订单数',
  `unfinished` mediumint(8) DEFAULT 0 COMMENT '未完成订单数',
  `failed` mediumint(8) DEFAULT 0 COMMENT '失败订单数',
  `ctime` datetime DEFAULT NULL COMMENT '统计时间',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `total`(`total`) USING BTREE,
  INDEX `completed`(`completed`) USING BTREE,
  INDEX `unfinished`(`unfinished`) USING BTREE,
  INDEX `failed`(`failed`) USING BTREE,
  INDEX `ctime`(`ctime`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=88 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of coupon_ept_order_eday
-- ----------------------------

/** 2019-2-15 2:21 每日客户活跃度统计表 **/
-- ----------------------------
-- Table structure for `coupon_ept_user_eday`
-- ----------------------------
DROP TABLE IF EXISTS `coupon_ept_user_eday`;
CREATE TABLE `coupon_ept_user_eday` (
  `id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT,
  `reg` mediumint(8) DEFAULT 0 COMMENT '注册数',
  `online` mediumint(8) DEFAULT 0 COMMENT '活跃数',
  `ctime` datetime DEFAULT NULL COMMENT '统计时间',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `reg`(`reg`) USING BTREE,
  INDEX `online`(`online`) USING BTREE,
  INDEX `ctime`(`ctime`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=89 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of coupon_ept_user_eday
-- ----------------------------
-- ------------------------------------- 

/**
 * 
 * 
 */
-- ----------------------------
-- Table structure for `coupon_order`
-- ----------------------------
DROP TABLE IF EXISTS `coupon_order`;
CREATE TABLE `coupon_order` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `order_sn` varchar(32) DEFAULT '' COMMENT '订单号',
  `bus_order_sn` varchar(50) DEFAULT '' COMMENT '商户订单号',
  `user_id` int(11) unsigned DEFAULT '0' COMMENT '用户ID',
  `order_status` tinyint(1) unsigned DEFAULT '0' COMMENT '订单状态  0：未支付  1：支付成功  2：支付失败',
  `pay_status` tinyint(1) unsigned DEFAULT '0' COMMENT '购买成功0:未支付 1:支付成功',
  `pay_type` tinyint(1) DEFAULT 0 COMMENT '0:微信支付 1：支付宝',
  `order_price` decimal(10,2) DEFAULT '0.00' COMMENT '订单总价',
  `add_time` datetime DEFAULT NULL COMMENT '添加时间',
  `confirm_time` datetime DEFAULT NULL COMMENT '下单时间',
  `pay_time` datetime DEFAULT NULL COMMENT '支付时间',
  `order_type` tinyint(1) DEFAULT 0 COMMENT '订单类型 0:正常订单 1：纠纷订单',
  `g_id` int(11) DEFAULT 0 COMMENT '商品二级分类id',
  PRIMARY KEY (`id`),
  UNIQUE KEY `order_sn` (`order_sn`),
  KEY `bus_order_sn` (`bus_order_sn`),
  KEY `user_id` (`user_id`),
  KEY `order_status` (`order_status`),
  KEY `pay_status` (`pay_status`),
  KEY `g_id` (`g_id`),
  KEY `pay_type` (`pay_type`)
) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8;

/**
 * 
 * 
 */
-- ----------------------------
-- Table structure for `coupon_order_detail`
-- ----------------------------
DROP TABLE IF EXISTS `coupon_order_detail`;
CREATE TABLE `coupon_order_detail` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `order_id` int(11) DEFAULT 0 COMMENT '订单id',
  `order_sn` varchar(32) DEFAULT '' COMMENT '订单号',
  `goods_id` int(11) DEFAULT 0 COMMENT '商品id',
  `goods_sn` varchar(60) DEFAULT '' COMMENT '商品编号',
  `buy_count` int(11) DEFAULT 0 COMMENT '购买数量',
  `buy_price` decimal(10,2) DEFAULT 0.00 COMMENT '购买金额',
  `add_time` datetime DEFAULT NULL COMMENT '添加时间',
  PRIMARY KEY (`id`),
  KEY `order_id` (`order_id`),
  KEY `order_sn` (`order_sn`),
  KEY `goods_id` (`goods_id`),
  KEY `goods_sn` (`goods_sn`),
  KEY `add_time` (`add_time`)
) ENGINE=InnoDB AUTO_INCREMENT=22 DEFAULT CHARSET=utf8;

-- ------------------------------------- 

/** 2019-2-15 2:21 客户资金明细 **/
-- ----------------------------
-- Table structure for `coupon_wallet_info`
-- ----------------------------
DROP TABLE IF EXISTS `coupon_wallet_info`;
CREATE TABLE `coupon_wallet_info` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `uid` int(11) DEFAULT NULL COMMENT '客户Id',
  `money` decimal(10,2) DEFAULT NULL COMMENT '变动金额',
  `pre_money` decimal(10,2) DEFAULT NULL COMMENT '原始金额',
  `end_money` decimal(10,2) DEFAULT NULL COMMENT '当前金额',
  `wtype1` int(11) DEFAULT 0 COMMENT '类型:1.支出 2.收入 ',
  `wtype2` int(11) DEFAULT 0 COMMENT '类型:3.微信 4.支付宝 5:佣金 6:提成:',
  `order_sn` varchar(32) DEFAULT NULL COMMENT '订单号',
  `transaction_id` varchar(32) DEFAULT NULL COMMENT '微信订单号',
  `out_trade_no` varchar(32) DEFAULT NULL COMMENT '商户订单号',
  `f_money` decimal(10,2) DEFAULT 0 COMMENT '冻结金额',
  `f_status` tinyint(2) DEFAULT 0 COMMENT '冻结状态0:正常 1:冻结中',
  `remark` varchar(300) DEFAULT NULL COMMENT '备注',
  `ctime` datetime DEFAULT NULL COMMENT '创建时间',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `uid`(`uid`) USING BTREE,
  INDEX `money`(`money`) USING BTREE,
  INDEX `wtype1`(`wtype1`) USING BTREE,
  INDEX `wtype2`(`wtype2`) USING BTREE,
  INDEX `order_sn`(`order_sn`) USING BTREE,
  INDEX `f_status`(`f_status`) USING BTREE,
  INDEX `transaction_id`(`transaction_id`) USING BTREE,
  INDEX `out_trade_no`(`out_trade_no`) USING BTREE
  
) ENGINE=InnoDB AUTO_INCREMENT=66 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of wallet_info
-- ----------------------------


-- ----------------------------
-- Table structure for `coupon_wallet_info_log`
-- 客户资金流水日志
-- ----------------------------
DROP TABLE IF EXISTS `coupon_wallet_info_log`;
CREATE TABLE `coupon_wallet_info_log` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `wid` int(11) DEFAULT NULL COMMENT '流水Id',
  `uid` int(11) DEFAULT NULL COMMENT '操作人id',
  `wtype1` tinyint(2) DEFAULT 0 COMMENT '类型:1.支出 2.收入 ',
  `wtype2` tinyint(2) DEFAULT 0 COMMENT '类型:3.微信 4.支付宝 5:佣金 6:提成:',
  `money` decimal(10,2) DEFAULT NULL COMMENT '变动金额',
  `pre_money` decimal(10,2) DEFAULT NULL COMMENT '原始金额',
  `end_money` decimal(10,2) DEFAULT NULL COMMENT '当前金额',
  `f_money` decimal(10,2) DEFAULT 0 COMMENT '冻结金额',
  `f_status` tinyint(2) DEFAULT 0 COMMENT '冻结状态0:正常 1:冻结中',
  `title` varchar(200) DEFAULT NULL COMMENT '标题',
  `content` varchar(500) DEFAULT NULL COMMENT '内容',
  `ctime` datetime DEFAULT NULL COMMENT '创建时间',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `wid`(`wid`) USING BTREE,
  INDEX `uid`(`uid`) USING BTREE,
  INDEX `money`(`money`) USING BTREE,
  INDEX `wtype1`(`wtype1`) USING BTREE,
  INDEX `wtype2`(`wtype2`) USING BTREE,
  INDEX `ctime`(`ctime`) USING BTREE
  
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of coupon_wallet_info_log
-- ----------------------------


-- ------------------------------------- 
/** 2019-3-11 4:11 1分钟解冻冻结金额**/
DROP PROCEDURE IF EXISTS cp_order_thaw_money_6h;
delimiter ??
CREATE PROCEDURE `cp_order_thaw_money_6h`()
BEGIN

DECLARE btime VARCHAR(10);
DECLARE etime VARCHAR(10);

/**
筛选前7天的冻结金额(性能方面)
*/
set @etime = DATE_FORMAT(now(),'%Y-%m-%d');
set @etime = date_add(@etime, interval 1 day);
set @btime = date_add(@etime, interval -7 day);


/**
 * 查询冻结金额
 */

/**
 *插入资金明细 
 */

INSERT INTO `coupon_wallet_info`
(`uid`, `money`, `pre_money`, `end_money`, `wtype1`,
`wtype2`, `order_sn`, `transaction_id`, `out_trade_no`, `f_money`, `f_status`, `remark`, `ctime`)
select 
-- (20, 0.00, 888.00, 888.00, 2, 5, 'O20190509133028998', NULL, NULL, 0.03, 1, NULL, '2019-05-23 17:47:43');
cf.u_id, cf.f_money, (select ifnull(money, 0.00) from coupon_user where id = cf.u_id), (select ifnull(money, 0.00) + ifnull(cf.f_money, 0.00) from coupon_user where id = cf.u_id), 2,
5, '', '', '', 0.00, 0.00, '佣金解冻', now()
from coupon_user_frozen_info cf
where cf.add_time > @btime and cf.add_time < @etime and cf.`status` = 0 and cf.`src_type` = 0 and TIMESTAMPDIFF(minute, cf.add_time,now()) >= 1;

/**
 * 更新用户余额
 */

update coupon_user set money = ifnull(money, 0.00) + ifnull(cf.f_money, 0.00) from coupon_user_frozen_info cf
where cf.add_time > @btime and cf.add_time < @etime and cf.`status` = 0 and cf.`src_type` = 0 and TIMESTAMPDIFF(minute, cf.add_time,now()) >= 1;

/**
 * 更新冻结金额
 */

update coupon_user_frozen_info set `status` = 1, u_time = now(), h_id = 0, h_name='系统' 
where add_time > @btime 
and add_time < @etime and `status` = 0 and `src_type` = 0 
and TIMESTAMPDIFF(minute, add_time,now()) >= 1;

select 1;

END??
delimiter ; -- ------------------------------------- 
/** 2019-3-11 4:11 关闭超过24小时未支付的订单**/
DROP PROCEDURE IF EXISTS cp_order_close_24h;
delimiter ??
CREATE PROCEDURE `cp_order_close_24h`()
BEGIN

DECLARE btime VARCHAR(10);
DECLARE etime VARCHAR(10);

/**
筛选前7天的订单(性能方面)
*/
set @etime = DATE_FORMAT(now(),'%Y-%m-%d');
set @etime = date_add(@etime, interval 1 day);
set @btime = date_add(@etime, interval -7 day);

-- SELECT TIMESTAMPDIFF(day, '2008-12-29',now())
update coupon_order set order_status = 5 where add_time > @btime and add_time < @etime and order_status = 0 and TIMESTAMPDIFF(day, add_time,now()) >= 1;

select 1;

END??
delimiter ; -- ------------------------------------- 

/**
 * 已支付订单 1小时后确认完成
 */
/** 2019-3-11 4:11 **/
DROP PROCEDURE IF EXISTS cp_order_finish_1h;
delimiter ??
CREATE PROCEDURE `cp_order_finish_1h`()
BEGIN

DECLARE btime VARCHAR(10);
DECLARE etime VARCHAR(10);

/**
筛选前10天的订单(性能方面)
*/
set @etime = DATE_FORMAT(now(),'%Y-%m-%d');
set @etime = date_add(@etime, interval 1 day);
set @btime = date_add(@etime, interval -10 day);

-- SELECT TIMESTAMPDIFF(day, '2008-12-29',now())
update coupon_order set order_status = 4 where add_time > @btime and add_time < @etime and order_status = 1 and TIMESTAMPDIFF(hour, add_time,now()) >= 1;

select 1;

END??
delimiter ; -- ------------------------------------- 

-- 生成用户编码存储过程

DROP PROCEDURE IF EXISTS `coupon_user_code_gen`;
delimiter ??
CREATE PROCEDURE coupon_user_code_gen()
BEGIN


DECLARE Debug INT DEFAULT 0;

DECLARE RandomID1 INT;
DECLARE RandomID2 INT;
DECLARE Upper INT;
DECLARE Lower INT;
DECLARE Start INT;

DECLARE d datetime;
DECLARE	ct INT;
DECLARE BeginGameID INT;
DECLARE EndGameID INT;


set @ct = 0;
SET @BeginGameID=1;
SET @EndGameID	= 200000;

Truncate table coupon_user_code_bom;


set @d=now();

WHILE @BeginGameID <= @EndGameID DO
	INSERT coupon_user_code_bom (u_id, u_code) VALUES(@BeginGameID, @BeginGameID);
	SET @BeginGameID = @BeginGameID + 1;
END WHILE;

-- ID生产 End
-- -----------------------------------------------------------------------

select timestampdiff(second,@d,now()), @ct;


-- 1至10万

set @Lower=1;

set @Upper=100000;
set @Start=0;

set @d=now();
 while @Start< @Upper-@Lower DO
 	set @RandomID1 = ROUND(((@Upper - @Lower -1) * RAND() + @Lower), 0);
 	set @RandomID2 = ROUND(((@Upper - @Lower -1) * RAND() + @Lower), 0);
	
 		if (select count(*) from coupon_user_code_bom where u_code=@RandomID1 OR u_code=@RandomID2)=2 then-- 账号是否存在
 			update coupon_user_code_bom set u_code=0 where u_code =@RandomID1;  -- 把第一个设置为0，防止冲突
 			update coupon_user_code_bom set u_code=@RandomID1 where u_code =@RandomID2;-- 第二个修改为第一个的
 			update coupon_user_code_bom set u_code=@RandomID2 where u_code =0;-- 第二个修改为第一个的
 			set @Start=@Start+1;
 		end if;
		
 end while;
 
select timestampdiff(second,@d,now()), @ct;


-- 10至20万

set @Lower=100000;

set @Upper=200000;
set @Start=0;

set @d=now();
 while @Start< @Upper-@Lower DO
 	set @RandomID1 = ROUND(((@Upper - @Lower -1) * RAND() + @Lower), 0);
 	set @RandomID2 = ROUND(((@Upper - @Lower -1) * RAND() + @Lower), 0);
	
 		if (select count(*) from coupon_user_code_bom where u_code=@RandomID1 OR u_code=@RandomID2)=2 then-- 账号是否存在
 			update coupon_user_code_bom set u_code=0 where u_code =@RandomID1;  -- 把第一个设置为0，防止冲突
 			update coupon_user_code_bom set u_code=@RandomID1 where u_code =@RandomID2;-- 第二个修改为第一个的
 			update coupon_user_code_bom set u_code=@RandomID2 where u_code =0;-- 第二个修改为第一个的
 			set @Start=@Start+1;
 		end if;
		
 end while;
 
select timestampdiff(second,@d,now()), @ct;


END??
delimiter ;-- ------------------------------------- 

/*
 * 近期下单情况统计储存过程，2019-2-15
 * zy
 * 参数 btime VARCHAR(10)
 * 
 * */
DROP PROCEDURE IF EXISTS rpt_cp_add_order;
delimiter ??
CREATE PROCEDURE `rpt_cp_add_order`(IN btime VARCHAR(10))
BEGIN
DECLARE fail INT DEFAULT 0;
DECLARE finish INT DEFAULT 0;
DECLARE total INT DEFAULT 0;
DECLARE unfinish INT DEFAULT 0;
DECLARE eptoid INT DEFAULT 0;
DECLARE etime VARCHAR(10) DEFAULT '';

SET @etime = date_add(btime, interval 1 day);

-- setting
SET @fail = (SELECT COUNT(*) FROM coupon_order WHERE order_status IN (5) AND add_time >= btime AND add_time < @etime);
SET @finish = (SELECT COUNT(*) FROM coupon_order WHERE order_status IN (4) AND add_time >= btime AND add_time < @etime);
SET @total = (SELECT COUNT(*) FROM coupon_order WHERE add_time >= btime AND add_time < @etime);
SET @unfinish = @total-@fail-@finish;

-- get id
SET @eptoid = (SELECT id FROM coupon_ept_order_eday WHERE ctime = btime);

-- update
IF ISNULL(@eptoid) THEN
INSERT INTO coupon_ept_order_eday (total, completed, unfinished, failed, ctime) VALUES(@total, @finish, @unfinish, @fail, btime);
ELSE
UPDATE coupon_ept_order_eday SET total=@total,completed=@finish, unfinished=@unfinish, failed=@fail WHERE id = @eptoid;
END IF;

SELECT 1;
-- SELECT @fail, @unfinish, @finish, @total;
-- SELECT btime, @etime;

END??
delimiter ; 

-- ------------------------------------- 
/*
 * 近期用户活跃情况储存过程，2019-2-15
 * zy
 * 参数 btime VARCHAR(10)
 * 
 * */
DROP PROCEDURE IF EXISTS rpt_cp_customer;
delimiter ??
CREATE PROCEDURE `rpt_cp_customer`(IN btime VARCHAR(10))
BEGIN
DECLARE reg INT DEFAULT 0;
DECLARE online INT DEFAULT 0;
DECLARE eptcid INT DEFAULT 0;
DECLARE etime VARCHAR(10) DEFAULT '';

SET @etime = date_add(btime, interval 1 day);

-- setting
SET @reg = (SELECT COUNT(*) FROM coupon_user WHERE register_time >= btime AND register_time < @etime);
SET @online = (SELECT COUNT(*) AS finish FROM coupon_user WHERE last_login_time >= btime AND last_login_time < @etime);

-- get id
SET @eptcid = (SELECT id FROM coupon_ept_user_eday WHERE ctime = btime);

-- update
IF ISNULL(@eptcid) THEN
INSERT INTO coupon_ept_user_eday (reg, online, ctime) VALUES(@reg, @online, btime);
ELSE
UPDATE coupon_ept_user_eday SET reg=@reg,online=@online WHERE id = @eptcid;
END IF;

SELECT 1;

END??
delimiter ; 

